/* ════════════════════════════════════════════
   AstroMap v4 — Premium Cosmic UI
   Optimized & Enhanced Edition
   ════════════════════════════════════════════ */
:root {
    --bg: #07071a;
    --bg-card: rgba(255,255,255,0.04);
    --bg-card-hover: rgba(255,255,255,0.08);
    --bg-glass: rgba(255,255,255,0.06);
    --surface: #0e0e2a;
    --surface-2: #151538;
    --border: rgba(255,255,255,0.08);
    --border-light: rgba(255,255,255,0.12);
    --text: #f0eef6;
    --text-muted: #8a84a0;
    --text-dim: #5a5475;
    --accent: #c9a0ff;
    --accent-light: #e0c8ff;
    --accent-dark: #7c5cbf;
    --rose: #ff6b9d;
    --rose-light: #ff8fb8;
    --gold: #ffd76e;
    --gold-dark: #c8a84e;
    --teal: #6ee7c8;
    --gradient-main: linear-gradient(135deg, #c9a0ff, #ff6b9d);
    --gradient-gold: linear-gradient(135deg, #ffd76e, #ff9a56);
    --gradient-cool: linear-gradient(135deg, #6ee7c8, #4fa0ff);
    --radius: 16px;
    --radius-sm: 10px;
    --radius-xs: 6px;
    --shadow: 0 8px 32px rgba(0,0,0,0.3);
    --shadow-glow: 0 0 40px rgba(201,160,255,0.15);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --font: 'Inter', system-ui, -apple-system, sans-serif;
    --font-display: 'Playfair Display', Georgia, serif;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { scroll-behavior: smooth; -webkit-text-size-adjust: 100%; }
body {
    font-family: var(--font); background: var(--bg); color: var(--text); line-height: 1.6;
    overflow-x: hidden; -webkit-font-smoothing: antialiased;
    padding-bottom: env(safe-area-inset-bottom, 0);
}

::selection { background: var(--accent-dark); color: white; }
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--accent-dark); border-radius: 3px; }

a { color: var(--accent); cursor: pointer; text-decoration: none; }
a:hover { color: var(--accent-light); }

/* ════════════ NAVBAR ════════════ */
.navbar {
    position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
    background: var(--navbar-bg, rgba(7,7,26,0.85)); backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    transition: var(--transition);
    pointer-events: auto; /* Ensure navbar always receives clicks */
    touch-action: manipulation; /* Prevent double-tap zoom on mobile */
}
.navbar.scrolled { background: var(--loading-bg, rgba(7,7,26,0.95)); }
.nav-inner {
    max-width: 1280px; margin: 0 auto; padding: 0 24px;
    display: flex; align-items: center; height: 64px; gap: 32px;
    position: relative; z-index: 1; pointer-events: auto;
}
.nav-brand {
    font-family: var(--font-display); font-size: 22px; font-weight: 700;
    background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
    cursor: pointer; flex-shrink: 0;
    transition: var(--transition);
}
.nav-brand:hover { filter: brightness(1.2) drop-shadow(0 0 8px rgba(201,160,255,0.4)); }
.nav-brand { touch-action: manipulation; pointer-events: auto; -webkit-tap-highlight-color: rgba(201,160,255,0.15); user-select: none; -webkit-user-select: none; }
.nav-links { display: flex; gap: 4px; flex: 1; flex-wrap: nowrap; overflow: hidden; }
.nav-link {
    padding: 8px 10px; border-radius: var(--radius-xs);
    font-size: 13px; font-weight: 500; color: var(--text-muted);
    transition: var(--transition); cursor: pointer; white-space: nowrap;
    touch-action: manipulation; pointer-events: auto;
    display: inline-flex; align-items: center;
    -webkit-tap-highlight-color: rgba(201,160,255,0.15);
    user-select: none; -webkit-user-select: none;
    flex-shrink: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis;
}
.nav-link:hover { color: var(--text); background: var(--bg-card); }
.nav-link.active { color: var(--accent); background: rgba(201,160,255,0.1); }

.nav-actions { display: flex; gap: 10px; align-items: center; }
.btn-ghost {
    padding: 8px 16px; border-radius: var(--radius-xs); border: 1px solid var(--border);
    background: transparent; color: var(--text-muted); font-size: 13px; font-weight: 500;
    cursor: pointer; transition: var(--transition); font-family: var(--font);
    touch-action: manipulation; pointer-events: auto;
}
.btn-ghost:hover { border-color: var(--accent); color: var(--accent); }
.btn-nav-primary {
    padding: 8px 18px; border-radius: var(--radius-xs); border: none;
    background: var(--gradient-main); color: white; font-size: 13px; font-weight: 600;
    cursor: pointer; transition: var(--transition); font-family: var(--font);
    touch-action: manipulation; pointer-events: auto;
}
.btn-nav-primary:hover { transform: translateY(-1px); box-shadow: var(--shadow-glow); }

/* Global button glow */
.btn-primary {
    position: relative; overflow: hidden;
}
.btn-primary::after {
    content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
    background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.12) 50%, transparent 70%);
    transform: translateX(-100%) rotate(0deg);
    transition: transform 0.6s ease;
}
.btn-primary:hover::after { transform: translateX(100%) rotate(0deg); }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 30px rgba(201,160,255,0.3); }

/* Button sparkle icon */
.btn-sparkle { display: inline-block; animation: sparkleRotate 3s ease-in-out infinite; }
@keyframes sparkleRotate {
    0%, 100% { transform: rotate(0deg) scale(1); }
    25% { transform: rotate(-15deg) scale(1.15); }
    75% { transform: rotate(15deg) scale(1.15); }
}
/* ══ Hamburger button ══ */
.nav-hamburger {
    display: none; background: none; border: none; color: var(--text);
    font-size: 24px; cursor: pointer;
    touch-action: manipulation; pointer-events: auto;
    -webkit-tap-highlight-color: rgba(201,160,255,0.15);
    transition: transform 0.3s ease;
}
.nav-hamburger.is-active { transform: rotate(90deg); }

/* ══ Mobile overlay ══ */
.nav-overlay {
    position: fixed; inset: 0; z-index: 9998;
    background: rgba(0,0,0,0.6); backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    opacity: 0; pointer-events: none;
    transition: opacity 0.3s ease;
}
.nav-overlay.visible { opacity: 1; pointer-events: auto; }

/* ══ Drawer header (mobile only, hidden on desktop) ══ */
.nav-drawer-header { display: none; }
.nav-drawer-actions { display: none; }

/* ══ Medium screens — right-side drawer ══ */
@media (max-width: 1100px) {
    .nav-links {
        display: flex; flex-direction: column;
        position: fixed; top: 0; right: 0; bottom: 0;
        width: 300px; max-width: 85vw;
        background: var(--loading-bg, rgba(7,7,26,0.98));
        backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px);
        padding: 0; gap: 0;
        border-left: 1px solid var(--border);
        overflow-y: auto; overscroll-behavior-y: contain;
        -webkit-overflow-scrolling: touch;
        z-index: 9999;
        transform: translateX(100%);
        transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: -8px 0 32px rgba(0,0,0,0.4);
    }
    .nav-links.open {
        transform: translateX(0) !important;
    }
    .nav-drawer-header {
        display: flex; align-items: center; justify-content: space-between;
        padding: 20px 20px 12px; border-bottom: 1px solid var(--border);
        flex-shrink: 0;
    }
    .nav-drawer-title {
        font-family: var(--font-display); font-size: 20px; font-weight: 700;
        background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
    }
    .nav-drawer-close {
        background: none; border: none; color: var(--text-muted); font-size: 22px;
        cursor: pointer; padding: 6px 10px; border-radius: var(--radius-xs);
        transition: var(--transition);
    }
    .nav-drawer-close:hover { color: var(--accent); background: rgba(201,160,255,0.1); }
    .nav-link {
        padding: 14px 20px !important; font-size: 15px !important;
        border-radius: 0 !important; min-height: 48px;
        display: flex; align-items: center; gap: 6px;
        overflow: visible; text-overflow: unset; flex-shrink: 0;
        border-bottom: 1px solid rgba(255,255,255,0.04);
        transition: background 0.2s ease, color 0.2s ease;
    }
    .nav-link:hover, .nav-link:active { background: rgba(201,160,255,0.08); }
    .nav-link.active {
        background: rgba(201,160,255,0.12);
        border-left: 3px solid var(--accent);
    }
    .nav-drawer-actions {
        display: flex; flex-direction: column; gap: 10px;
        padding: 20px; margin-top: auto; flex-shrink: 0;
        border-top: 1px solid var(--border);
    }
    .nav-drawer-actions .btn-ghost,
    .nav-drawer-actions .btn-nav-primary {
        width: 100%; text-align: center; padding: 12px; font-size: 14px;
    }
    .nav-actions { display: none; }
    .nav-hamburger {
        display: flex; align-items: center; justify-content: center;
        margin-left: auto; font-size: 28px; padding: 8px;
        min-width: 48px; min-height: 48px; z-index: 10000; position: relative;
    }
    .navbar.nav-hidden.menu-open { transform: translateY(0) !important; }
}

@media (max-width: 768px) {
    .nav-link { padding: 16px 20px !important; font-size: 16px !important; min-height: 52px; -webkit-tap-highlight-color: rgba(201,160,255,0.15); }
    .nav-inner { padding: 0 16px; }
    .nav-brand { font-size: 18px; }
    
    /* Hero mobile */
    .hero { min-height: calc(100svh - 64px); }
    .hero-content { padding: 24px 16px; }
    .hero-badge { font-size: 10px; padding: 6px 14px; margin-bottom: 20px; }
    .hero-title { font-size: clamp(1.8rem, 7vw, 3rem); margin-bottom: 14px; }
    .hero-subtitle { font-size: 14px; line-height: 1.6; margin-bottom: 24px; }
    .hero-stats { gap: 16px; flex-wrap: wrap; margin-bottom: 28px; }
    .hero-stat span { font-size: 22px; }
    .hero-stat small { font-size: 10px; }
    .btn-hero { padding: 14px 32px; font-size: 15px; width: 100%; max-width: 320px; }
    .hero-note { font-size: 11px; }
    
    /* Sections mobile */
    .home-features, .home-testimonials, .home-cta, .about-content, .pricing-grid,
    .pricing-faq, .pricing-hero, .about-hero, .daily-hero, .compat-hero, .moon-hero { padding: 48px 16px; }
    .section-title { font-size: 24px; margin-bottom: 32px; }
    .features-grid { grid-template-columns: 1fr; gap: 12px; }
    .feature-card { padding: 24px 18px; }
    .feature-icon { font-size: 28px; margin-bottom: 10px; }
    .feature-card h3 { font-size: 16px; }
    .feature-card p { font-size: 13px; }
    .testimonials-grid { grid-template-columns: 1fr; gap: 12px; }
    .testimonial-card { padding: 20px; }
    .home-cta h2 { font-size: 26px; }
    .home-cta p { font-size: 14px; }
    
    /* Steps mobile */
    .step-container { padding: 32px 16px; }
    .step-container h2 { font-size: 22px; }
    .preference-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; }
    .pref-card { padding: 14px 10px; }
    .pref-icon { font-size: 22px; }
    .pref-label { font-size: 12px; }
    .option-row { gap: 6px; }
    .option-btn { padding: 10px 12px; font-size: 12px; flex: 1; text-align: center; }
    .lifestyle-group h3 { font-size: 14px; }
    .step-actions { gap: 10px; }
    .step-actions .btn-primary, .step-actions .btn-ghost { flex: 1; font-size: 14px; padding: 12px; text-align: center; }
    
    /* Results mobile — full screen layout */
    .results-header { padding: 6px 12px; }
    .results-header h2 { font-size: 14px; }
    .results-header-row { gap: 10px; }
    .results-intro { font-size: 11px; }
    .btn-back { padding: 5px 10px; font-size: 11px; }
    .results-layout { flex-direction: column; height: calc(100vh - 90px); }
    .results-map-wrap { order: -1; height: 38vh; min-height: 220px; flex-shrink: 0; touch-action: pan-x pan-y; }
    .results-sidebar {
        width: 100%; flex: 1; min-height: 0; border-right: none;
        border-top: 1px solid var(--border); overflow: hidden;
        -webkit-overflow-scrolling: touch; overscroll-behavior-y: contain;
        display: flex; flex-direction: column;
    }
    .results-sidebar .tab-content { overflow-y: auto; flex: 1; min-height: 0; -webkit-overflow-scrolling: touch; }
    .sidebar-actions { order: 99; }
    .map-controls { top: 8px; right: 8px; gap: 4px; flex-wrap: wrap; }
    .map-ctrl { padding: 6px 10px; font-size: 11px; touch-action: manipulation; }
    .map-legend { bottom: 8px; left: 8px; max-width: 150px; font-size: 10px; }
    .map-legend-toggle { padding: 6px 10px; font-size: 11px; }
    .map-city-peek { bottom: 8px; padding: 6px 14px; font-size: 11px; }
    .peek-name { font-size: 12px; }
    .peek-score { font-size: 13px; }
    .tab-bar { touch-action: manipulation; flex-shrink: 0; }
    .tab-btn { padding: 10px 6px; font-size: 11px; touch-action: manipulation; min-height: 44px; }
    .search-container {
        margin: -20px -20px 8px; padding: 10px 12px 8px;
        background: var(--surface);
    }
    .search-input-wrap { margin-bottom: 6px; }
    .search-input-wrap input { padding: 10px 36px 10px 36px; font-size: 13px; }
    .filter-chips { gap: 4px; overflow-x: auto; flex-wrap: nowrap; padding-bottom: 4px; -webkit-overflow-scrolling: touch; touch-action: pan-x; scrollbar-width: none; }
    .filter-chips::-webkit-scrollbar { display: none; }
    .filter-chip { padding: 5px 10px; font-size: 11px; flex-shrink: 0; touch-action: manipulation; min-height: 32px; }
    .search-sort-row { margin-top: 4px; }
    .results-meta { font-size: 11px; }
    .sort-select { font-size: 11px; padding: 4px 24px 4px 8px; }
    .results-stats { margin-top: 4px; padding: 4px 8px; font-size: 10px; }
    .result-card { padding: 10px 12px; touch-action: manipulation; }
    .result-city { font-size: 14px; }
    .result-country { margin-bottom: 4px; }
    .result-reason { font-size: 11px; line-height: 1.4; }
    .result-tags { gap: 3px; margin-bottom: 4px; }
    .result-tag { font-size: 10px; padding: 2px 6px; }
    .results-list { overscroll-behavior: contain; gap: 6px; padding-bottom: 16px; }
    .sidebar-actions { padding: 8px 10px; gap: 6px; flex-shrink: 0; border-top: 1px solid var(--border); position: relative; z-index: 100; }
    .sidebar-actions .btn-primary, .sidebar-actions .btn-ghost { font-size: 12px; padding: 8px; }
    .natal-wheel-wrap { max-width: 320px; }
    .natal-grid .natal-row { padding: 6px 10px; }
    .natal-sign { font-size: 12px; }
    .natal-section-title { font-size: 13px; }
    
    /* Forms mobile */
    .page-container { padding: 72px 16px 60px; }
    .page-title { font-size: 24px; }
    .page-subtitle { font-size: 13px; }
    .form-row { grid-template-columns: 1fr; }
    .tarot-form, .crystal-form, .dream-form, .fortune-form { padding: 0 8px; margin: 24px auto; }
    textarea { font-size: 16px; /* Prevents iOS zoom */ }
    input[type="date"], input[type="time"], input[type="email"], input[type="text"], input[type="tel"], input[type="password"] { font-size: 16px; /* Prevents iOS zoom */ }
    
    /* Modal mobile */
    .modal-content { margin: 8px; max-height: 90vh; overflow-y: auto; border-radius: var(--radius-sm); }
    
    /* Pricing mobile */
    .pricing-grid { grid-template-columns: 1fr; padding-top: 32px; }
    .pricing-card { padding: 24px 20px; }
    
    /* About mobile */
    .about-hero h1 { font-size: 28px; }
    .about-section h2 { font-size: 20px; }
    .about-section p { font-size: 13px; padding: 0 8px; }
    .about-how-grid { grid-template-columns: 1fr; gap: 12px; }
    .about-features-grid { grid-template-columns: 1fr; gap: 12px; }
    
    /* Compatibility mobile */
    .compat-persons, .compat-form { flex-direction: column; }
    .compat-heart { transform: rotate(90deg); }
    .compat-categories { grid-template-columns: 1fr; }
    
    /* Tarot/Crystal/Dream/Fortune mobile */
    .tarot-deck { gap: 8px; padding: 0 4px; }
    .tarot-card-slot { width: min(180px, 40vw); }
    .tarot-front-content { padding: 10px 8px; }
    .tarot-front-content .tarot-emoji { font-size: 28px; margin-bottom: 6px; }
    .tarot-front-content .tarot-name { font-size: 12px; margin-bottom: 4px; }
    .tarot-front-content .tarot-meaning { font-size: 10px; line-height: 1.4; }
    .tarot-front-content .tarot-position { font-size: 8px; letter-spacing: 1px; margin-bottom: 6px; }
    .tarot-slot-label { font-size: 10px; letter-spacing: 1px; }
    .tarot-back-symbol { font-size: 28px; }
    .tarot-overall { padding: 20px 16px; margin: 20px auto 0; }
    .tarot-overall h3 { font-size: 18px; }
    .tarot-overall p { font-size: 13px; }
    .tarot-spread { flex-direction: column; align-items: center; gap: 16px; }
    .tarot-deck .tarot-card-slot { width: min(220px, 60vw); }
    .tarot-deck { flex-wrap: nowrap; flex-direction: column; align-items: center; gap: 12px; }
    .wellness-grid { grid-template-columns: 1fr; }
    .crystal-support-grid { grid-template-columns: 1fr; }
    .dream-symbols-grid { grid-template-columns: 1fr; }
    .daily-scores { grid-template-columns: repeat(2, 1fr); }
    .fortune-form select { font-size: 16px; }
    .fortune-reveal { padding: 0 4px; }
    .fortune-title { font-size: 22px; }
    .fortune-cup-icon { font-size: 44px; }
    .fortune-general, .fortune-symbols, .fortune-sections, .fortune-answer, .fortune-advice { padding: 14px; margin-bottom: 16px; }
    .fortune-section { padding: 14px; }
    .fortune-section h4 { font-size: 14px; }
    .fortune-section p { font-size: 12px; }
    .fortune-dropzone { padding: 24px 12px; min-height: 150px; }
    .fortune-drop-icon { font-size: 36px; }
    .fortune-drop-text { font-size: 14px; }
    .fortune-preview-img { max-height: 240px; }
}

/* ════════════ PAGES ════════════ */
.page { display: none; min-height: 100vh; padding-top: 64px; }
.page.active { display: block; animation: pageEnter 0.5s cubic-bezier(0.23, 1, 0.32, 1) forwards; }

/* ════════════ HERO ════════════ */
.hero {
    position: relative; min-height: calc(100vh - 64px);
    display: flex; align-items: center; justify-content: center;
    overflow: hidden;
}
#stars-canvas { position: absolute; inset: 0; z-index: 0; }
.hero-content {
    position: relative; z-index: 2; text-align: center;
    padding: 40px 24px; max-width: 700px;
}
.hero-badge {
    display: inline-block; padding: 8px 20px; border-radius: 50px;
    background: var(--bg-glass); border: 1px solid var(--border);
    font-size: 12px; font-weight: 500; color: var(--accent-light);
    letter-spacing: 1px; text-transform: uppercase; margin-bottom: 28px;
    animation: badgeFadeIn 0.8s ease 0.2s both;
    position: relative; overflow: hidden;
}
.hero-badge::after {
    content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(201,160,255,0.15), transparent);
    animation: shimmerSlide 3s ease-in-out infinite 1s;
}
@keyframes badgeFadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes shimmerSlide { 0% { left: -100%; } 50% { left: 100%; } 100% { left: 100%; } }
.hero-title {
    font-family: var(--font-display); font-size: clamp(2.5rem, 6vw, 4.2rem);
    font-weight: 700; line-height: 1.15; margin-bottom: 20px;
    animation: titleReveal 1s ease 0.4s both;
}
@keyframes titleReveal { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.hero-title em {
    font-style: italic;
    background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
.hero-subtitle { font-size: 17px; color: var(--text-muted); line-height: 1.7; margin-bottom: 36px; animation: titleReveal 1s ease 0.6s both; }
.hero-stats {
    display: flex; justify-content: center; gap: 40px; margin-bottom: 40px;
    animation: titleReveal 1s ease 0.8s both;
}
.hero-stat { text-align: center; }
.hero-stat span { display: block; font-size: 28px; font-weight: 700; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
.hero-stat small { font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }
.btn-hero {
    padding: 16px 40px; border: none; border-radius: 50px;
    background: var(--gradient-main); color: white;
    font-size: 16px; font-weight: 600; font-family: var(--font);
    cursor: pointer; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 24px rgba(201,160,255,0.3);
    animation: titleReveal 1s ease 1s both;
    position: relative; overflow: hidden;
}
.btn-hero::before {
    content: ''; position: absolute; inset: -2px; border-radius: 50px;
    background: var(--gradient-main); z-index: -1; filter: blur(12px); opacity: 0.5;
    animation: btnGlow 2s ease-in-out infinite;
}
@keyframes btnGlow {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(1.05); }
}
.btn-hero:hover { transform: translateY(-3px) scale(1.03); box-shadow: 0 12px 50px rgba(201,160,255,0.5); }
.hero-note { margin-top: 16px; font-size: 12px; color: var(--text-dim); animation: titleReveal 1s ease 1.2s both; }

/* ════════════ HOME SECTIONS ════════════ */
.home-features, .home-testimonials, .home-cta, .about-content, .pricing-grid,
.pricing-faq, .pricing-hero, .about-hero, .daily-hero, .compat-hero, .moon-hero {
    max-width: 1100px; margin: 0 auto; padding: 80px 24px;
}
.section-title {
    font-family: var(--font-display); font-size: 32px; font-weight: 700;
    text-align: center; margin-bottom: 48px;
}
.features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
.feature-card {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
    padding: 32px 24px; cursor: pointer; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative; overflow: hidden;
}
.feature-card::before {
    content: ''; position: absolute; inset: 0;
    background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(201,160,255,0.08), transparent 60%);
    opacity: 0; transition: opacity 0.4s ease;
}
.feature-card:hover::before { opacity: 1; }
.feature-card:hover {
    background: var(--bg-card-hover); border-color: var(--accent-dark);
    transform: translateY(-6px) scale(1.02);
    box-shadow: 0 12px 40px rgba(201,160,255,0.12);
}
.feature-icon { font-size: 36px; display: block; margin-bottom: 16px; transition: transform 0.4s ease; }
.feature-card:hover .feature-icon { transform: scale(1.15) translateY(-2px); }
.feature-card h3 { font-size: 18px; font-weight: 600; margin-bottom: 8px; }
.feature-card p { font-size: 14px; color: var(--text-muted); line-height: 1.6; }
.glass-locked { opacity: 0.7; }
.glass-locked:hover { opacity: 0.9; }
.lock-badge {
    position: absolute; top: 16px; right: 16px;
    padding: 4px 10px; border-radius: 50px; font-size: 11px; font-weight: 600;
    background: var(--gradient-gold); color: #1a1a2e;
}

/* Testimonials */
.testimonials-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
.testimonial-card {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
    padding: 28px; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}
.testimonial-card:hover { background: var(--bg-card-hover); transform: translateY(-4px); box-shadow: 0 8px 30px rgba(0,0,0,0.2); }
.testimonial-stars { color: var(--gold); font-size: 16px; margin-bottom: 12px; letter-spacing: 2px; }
.testimonial-card p { font-size: 14px; color: var(--text); line-height: 1.7; margin-bottom: 16px; font-style: italic; }
.testimonial-user { display: flex; align-items: center; gap: 10px; }
.testimonial-user img { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; }
.testimonial-user span { font-weight: 600; font-size: 14px; }
.testimonial-user small { color: var(--text-muted); font-size: 12px; }

/* CTA */
.home-cta {
    text-align: center; padding: 80px 24px;
    background: linear-gradient(180deg, transparent, rgba(201,160,255,0.05), transparent);
}
.home-cta h2 { font-family: var(--font-display); font-size: 36px; margin-bottom: 16px; }
.home-cta p { color: var(--text-muted); margin-bottom: 32px; font-size: 16px; }

/* ════════════ ABOUT ════════════ */
.about-hero { text-align: center; padding-top: 80px; }
.about-hero h1 { font-family: var(--font-display); font-size: 42px; }
.about-hero h1 em { font-style: italic; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
.about-tagline { color: var(--text-muted); font-size: 16px; margin-top: 12px; }
.about-content { text-align: center; }
.about-section { margin-bottom: 60px; text-align: center; }
.about-section h2 { font-family: var(--font-display); font-size: 26px; margin-bottom: 16px; }
.about-section p { color: var(--text-muted); line-height: 1.8; max-width: 700px; margin: 0 auto 12px auto; text-align: center; }
.about-how-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 60px; }
.about-step-card {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
    padding: 28px; text-align: center;
}
.about-step-num {
    font-family: var(--font-display); font-size: 36px; font-weight: 700;
    background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
    display: block; margin-bottom: 12px;
}
.about-step-card h3 { font-size: 16px; margin-bottom: 8px; }
.about-step-card p { font-size: 13px; color: var(--text-muted); }
.formula-box {
    background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-sm);
    padding: 20px; margin: 16px auto; overflow-x: auto; max-width: 700px;
}
.formula-box code { font-size: 13px; color: var(--accent-light); font-family: 'Fira Code', monospace; }
.about-features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 24px; }
.about-feature { text-align: center; padding: 20px; }
.about-feature span { font-size: 28px; display: block; margin-bottom: 8px; }
.about-feature strong { display: block; margin-bottom: 4px; }
.about-feature p { font-size: 12px; color: var(--text-muted); }

/* ════════════ PRICING ════════════ */
.pricing-hero { text-align: center; padding-top: 80px; }
.pricing-hero h1 { font-family: var(--font-display); font-size: 42px; margin-bottom: 12px; }
.pricing-hero h1 em { font-style: italic; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
.pricing-tagline { color: var(--text-muted); font-size: 16px; }
.billing-toggle { display: flex; align-items: center; justify-content: center; gap: 12px; margin-top: 32px; }
.billing-label { font-size: 14px; color: var(--text-muted); transition: var(--transition); }
.billing-label.active { color: var(--text); font-weight: 600; }
.save-badge { background: var(--gradient-gold); color: #1a1a2e; padding: 2px 8px; border-radius: 50px; font-size: 11px; font-weight: 700; }
.toggle-switch { position: relative; display: inline-block; width: 48px; height: 26px; }
.toggle-switch input { opacity: 0; width: 0; height: 0; }
.toggle-slider {
    position: absolute; cursor: pointer; inset: 0; background: var(--surface-2);
    border: 1px solid var(--border); border-radius: 13px; transition: var(--transition);
}
.toggle-slider:before {
    content: ''; position: absolute; height: 20px; width: 20px;
    left: 2px; bottom: 2px; background: var(--accent);
    border-radius: 50%; transition: var(--transition);
}
.toggle-switch input:checked + .toggle-slider:before { transform: translateX(22px); }

.pricing-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 24px; max-width: 1000px; padding-top: 48px;
}
.pricing-card {
    background: var(--bg-card); border: 1px solid var(--border);
    border-radius: var(--radius); padding: 36px 28px;
    transition: var(--transition); position: relative;
}
.pricing-card:hover { border-color: var(--accent-dark); transform: translateY(-4px); }
.pricing-card.popular {
    border-color: var(--accent); background: rgba(201,160,255,0.06);
    box-shadow: var(--shadow-glow);
}
.popular-badge {
    position: absolute; top: -12px; left: 50%; transform: translateX(-50%);
    background: var(--gradient-main); color: white; padding: 4px 16px;
    border-radius: 50px; font-size: 12px; font-weight: 700; white-space: nowrap;
}
.pricing-header { text-align: center; margin-bottom: 20px; }
.pricing-icon { font-size: 40px; display: block; margin-bottom: 12px; }
.pricing-header h3 { font-size: 22px; font-weight: 700; }
.pricing-tagline-card { font-size: 13px; color: var(--text-muted); margin-top: 4px; }
.pricing-price { text-align: center; margin-bottom: 28px; }
.price-amount { font-size: 40px; font-weight: 800; }
.pricing-card.popular .price-amount { background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
.price-period { font-size: 14px; color: var(--text-muted); }
.pricing-features { list-style: none; margin-bottom: 28px; }
.pricing-features li { padding: 8px 0; font-size: 14px; border-bottom: 1px solid var(--border); }
.pricing-features li.included { color: var(--text); }
.pricing-features li.excluded { color: var(--text-dim); }
.btn-pricing {
    width: 100%; padding: 14px; border: 1px solid var(--border); border-radius: var(--radius-sm);
    background: var(--bg-card); color: var(--text); font-size: 15px; font-weight: 600;
    cursor: pointer; transition: var(--transition); font-family: var(--font);
}
.btn-pricing:hover { border-color: var(--accent); }
.btn-pricing.popular {
    border: none; background: var(--gradient-main); color: white;
    box-shadow: 0 4px 20px rgba(201,160,255,0.3);
}
.btn-pricing.popular:hover { transform: translateY(-2px); box-shadow: 0 8px 32px rgba(201,160,255,0.4); }

/* FAQ */
.pricing-faq { max-width: 700px; }
.pricing-faq h2 { font-family: var(--font-display); font-size: 28px; text-align: center; margin-bottom: 32px; }
.faq-grid { display: flex; flex-direction: column; gap: 12px; }
.faq-item {
    background: var(--bg-card); border: 1px solid var(--border);
    border-radius: var(--radius-sm); overflow: hidden; cursor: pointer;
}
.faq-q {
    padding: 18px 20px; font-weight: 600; font-size: 14px;
    display: flex; justify-content: space-between; align-items: center;
}
.faq-arrow { transition: var(--transition); font-size: 18px; }
.faq-item.open .faq-arrow { transform: rotate(90deg); }
.faq-a {
    padding: 0 20px 0; max-height: 0; overflow: hidden; transition: all 0.3s;
    font-size: 14px; color: var(--text-muted); line-height: 1.7;
}
.faq-item.open .faq-a { padding: 0 20px 18px; max-height: 200px; }
.faq-question {
    padding: 18px 20px; font-weight: 600; font-size: 14px;
    display: flex; justify-content: space-between; align-items: center;
}
.faq-question::after { content: '›'; transition: var(--transition); font-size: 18px; color: var(--text-muted); }
.faq-item.open .faq-question::after { transform: rotate(90deg); }
.faq-answer {
    padding: 0 20px 0; max-height: 0; overflow: hidden; transition: all 0.3s;
    font-size: 14px; color: var(--text-muted); line-height: 1.7;
}
.faq-item.open .faq-answer { padding: 0 20px 18px; max-height: 200px; }

/* ════════════ TRUST BADGES & PAYMENT LOGOS ════════════ */
.trust-badges {
    display: flex; justify-content: center; gap: 24px; flex-wrap: wrap;
    margin-top: 48px; padding: 24px; border-radius: var(--radius);
    background: rgba(201,160,255,0.04); border: 1px solid rgba(201,160,255,0.08);
}
.trust-item {
    display: flex; align-items: center; gap: 8px; font-size: 13px;
    color: var(--text-muted); font-weight: 500;
}
.trust-icon { font-size: 18px; }
.payment-logos {
    display: flex; justify-content: center; gap: 16px; flex-wrap: wrap;
    margin-top: 16px; padding: 12px 0;
}
.payment-logo {
    display: inline-flex; align-items: center; justify-content: center;
    padding: 6px 14px; border-radius: 6px; font-size: 11px; font-weight: 700;
    letter-spacing: 0.5px; background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.08); color: var(--text-muted);
}
.payment-logo.iyzico-logo {
    background: linear-gradient(135deg, rgba(29,191,115,0.15), rgba(29,191,115,0.05));
    border-color: rgba(29,191,115,0.3); color: #1dbf73; font-weight: 800;
}

/* ════════════ CHECKOUT MODAL ════════════ */
.checkout-modal-content {
    max-width: 520px !important; padding: 0 !important; overflow: hidden !important;
}
.checkout-step { padding: 36px 32px 32px; }
.checkout-header {
    text-align: center; margin-bottom: 28px;
}
.checkout-icon {
    font-size: 40px; display: block; margin-bottom: 8px;
}
.checkout-header h2 {
    font-family: var(--font-display); font-size: 24px; font-weight: 700;
    margin-bottom: 4px;
}
.checkout-plan-info {
    font-size: 14px; color: var(--accent); font-weight: 600;
}
.checkout-secure-note {
    font-size: 13px; color: #1dbf73; font-weight: 500;
}
.checkout-summary {
    margin: 24px 0 20px; padding: 16px; border-radius: var(--radius-sm);
    background: rgba(201,160,255,0.06); border: 1px solid rgba(201,160,255,0.12);
}
.summary-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: 8px 0; font-size: 14px; color: var(--text-muted);
}
.summary-row + .summary-row { border-top: 1px solid rgba(201,160,255,0.08); }
.summary-amount {
    font-size: 20px; font-weight: 800; color: var(--accent);
    background: var(--gradient-main); -webkit-background-clip: text;
    background-clip: text; -webkit-text-fill-color: transparent;
}
.summary-note {
    justify-content: center; font-size: 12px; color: #1dbf73; border: none !important;
}
.btn-checkout {
    padding: 16px !important; font-size: 16px !important; font-weight: 700 !important;
    background: linear-gradient(135deg, #1dbf73, #17a362) !important;
    border: none; border-radius: var(--radius-sm) !important; color: white !important;
    cursor: pointer; transition: all 0.3s ease;
    box-shadow: 0 4px 16px rgba(29,191,115,0.3);
}
.btn-checkout:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(29,191,115,0.4);
}
.checkout-disclaimer {
    text-align: center; font-size: 11px; color: var(--text-muted);
    margin-top: 12px; line-height: 1.5; opacity: 0.7;
}
.iyzico-form-container {
    min-height: 300px; position: relative;
}
.iyzico-form-container iframe {
    width: 100% !important; min-height: 400px; border: none;
    border-radius: var(--radius-sm);
}
.checkout-loading {
    display: flex; flex-direction: column; align-items: center;
    justify-content: center; padding: 60px 20px; gap: 16px;
}
.checkout-loading .loading-spinner {
    font-size: 32px; animation: spin 1.5s linear infinite;
    background: var(--gradient-main); -webkit-background-clip: text;
    background-clip: text; -webkit-text-fill-color: transparent;
}
.checkout-loading p { font-size: 14px; color: var(--text-muted); }

/* ════════════ AUTH MODALS ════════════ */
.modal { position: fixed; inset: 0; z-index: 2000; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); }
.modal.hidden { display: none; }
.modal-content { position: relative; max-width: 440px; width: 95%; max-height: 90vh; overflow-y: auto; border-radius: var(--radius); background: var(--surface); border: 1px solid var(--border); padding: 40px 32px; }
.modal-close { position: absolute; top: 16px; right: 16px; background: none; border: none; color: var(--text-muted); font-size: 20px; cursor: pointer; z-index: 10; }
.modal-close:hover { color: var(--text); }
.modal-auth {
    background: var(--surface); border: 1px solid var(--border); padding: 40px 32px;
}
.auth-header { text-align: center; margin-bottom: 28px; }
.auth-logo { font-size: 32px; display: block; margin-bottom: 12px; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
.auth-header h2 { font-size: 24px; font-weight: 700; }
.auth-header p { font-size: 14px; color: var(--text-muted); margin-top: 4px; }
.auth-form { display: flex; flex-direction: column; gap: 16px; }
.auth-options { display: flex; justify-content: space-between; align-items: center; }
.checkbox-label { font-size: 13px; color: var(--text-muted); display: flex; align-items: center; gap: 6px; cursor: pointer; }
.checkbox-label input { accent-color: var(--accent); }
.auth-link { font-size: 13px; color: var(--accent); }
.btn-auth {
    width: 100%; padding: 14px; border: none; border-radius: var(--radius-sm);
    background: var(--gradient-main); color: white; font-size: 15px; font-weight: 600;
    cursor: pointer; transition: var(--transition); font-family: var(--font);
}
.btn-auth:hover { transform: translateY(-1px); box-shadow: var(--shadow-glow); }
.auth-divider { display: flex; align-items: center; gap: 16px; margin: 20px 0; }
.auth-divider::before, .auth-divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }
.auth-divider span { font-size: 13px; color: var(--text-dim); }
.social-divider { display: flex; align-items: center; gap: 16px; margin: 20px 0; }
.social-divider::before, .social-divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }
.social-divider span { font-size: 13px; color: var(--text-dim); }
.modal-subtitle { font-size: 14px; color: var(--text-muted); margin-top: 4px; }
.modal-footer { text-align: center; margin-top: 20px; font-size: 14px; color: var(--text-muted); }
.modal-footer a { color: var(--accent); font-weight: 600; cursor: pointer; }
.form-row-between { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
.link-sm { font-size: 13px; color: var(--accent); cursor: pointer; text-decoration: none; }
.link-sm:hover { text-decoration: underline; }
.full-width { width: 100% !important; }
.social-auth { display: flex; flex-direction: column; gap: 10px; }
.btn-social {
    width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: var(--radius-sm);
    background: var(--bg-card); color: var(--text); font-size: 14px; font-weight: 500;
    cursor: pointer; transition: var(--transition); display: flex; align-items: center;
    justify-content: center; gap: 10px; font-family: var(--font);
}
.btn-social:hover { border-color: var(--accent-dark); background: var(--bg-card-hover); }
.btn-social.apple { background: white; color: #000; border-color: white; }
.btn-social.apple:hover { background: #f0f0f0; }
.auth-switch { text-align: center; margin-top: 20px; font-size: 14px; color: var(--text-muted); }
.auth-switch a { color: var(--accent); font-weight: 600; cursor: pointer; }

/* ════════════ FORM ════════════ */
.form-group { margin-bottom: 16px; }
.form-group label { display: block; font-size: 13px; font-weight: 600; color: var(--text-muted); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
.form-group input, .form-group select {
    width: 100%; padding: 12px 16px; background: var(--surface); border: 1px solid var(--border);
    border-radius: var(--radius-sm); color: var(--text); font-size: 14px; font-family: var(--font);
    outline: none; transition: var(--transition);
}
.form-group input:focus, .form-group select:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(201,160,255,0.1); }
.form-group small { font-size: 12px; color: var(--text-dim); margin-top: 4px; display: block; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.city-select { height: 120px; cursor: pointer; }
.city-select option { padding: 8px 12px; }

/* ════════════ STEPS ════════════ */
.step-container { max-width: 600px; margin: 0 auto; padding: 60px 24px; }
.step-indicator { display: flex; justify-content: center; gap: 12px; margin-bottom: 40px; }
.step-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--surface-2); border: 1px solid var(--border); transition: var(--transition); }
.step-dot.active { background: var(--accent); border-color: var(--accent); box-shadow: 0 0 10px rgba(201,160,255,0.5); }
.step-dot.completed { background: var(--teal); border-color: var(--teal); }
.step-container h2 { font-family: var(--font-display); font-size: 28px; text-align: center; margin-bottom: 8px; }
.step-desc { text-align: center; color: var(--text-muted); font-size: 14px; margin-bottom: 32px; }
.step-actions { display: flex; justify-content: space-between; margin-top: 32px; gap: 16px; }

/* Preference cards */
.preference-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px; margin-bottom: 10px; }
.pref-card {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
    padding: 20px 16px; text-align: center; cursor: pointer; transition: var(--transition);
}
.pref-card:hover { border-color: var(--accent-dark); transform: translateY(-2px); }
.pref-card.selected { background: rgba(201,160,255,0.1); border-color: var(--accent); box-shadow: 0 0 20px rgba(201,160,255,0.15); }
.pref-icon { font-size: 28px; display: block; margin-bottom: 8px; }
.pref-label { display: block; font-size: 14px; font-weight: 600; margin-bottom: 4px; }
.pref-planet { display: block; font-size: 11px; color: var(--text-dim); }

/* Option buttons */
.option-row { display: flex; flex-wrap: wrap; gap: 8px; }
.option-btn {
    padding: 10px 16px; border: 1px solid var(--border); border-radius: var(--radius-sm);
    background: var(--bg-card); color: var(--text-muted); font-size: 13px; font-weight: 500;
    cursor: pointer; transition: var(--transition); font-family: var(--font);
}
.option-btn:hover { border-color: var(--accent-dark); color: var(--text); }
.option-btn.selected { background: rgba(201,160,255,0.15); border-color: var(--accent); color: var(--accent-light); }

/* Buttons shared */
.btn-primary {
    padding: 14px 28px; border: none; border-radius: var(--radius-sm);
    background: var(--gradient-main); color: white; font-size: 15px; font-weight: 600;
    cursor: pointer; transition: var(--transition); font-family: var(--font);
}
.btn-primary:hover { transform: translateY(-1px); box-shadow: var(--shadow-glow); }
.btn-secondary {
    padding: 10px 20px; border: 1px solid var(--border); border-radius: var(--radius-sm);
    background: var(--bg-card); color: var(--text-muted); font-size: 13px; font-weight: 500;
    cursor: pointer; transition: var(--transition); font-family: var(--font);
}
.btn-secondary:hover { border-color: var(--accent); color: var(--text); }
.btn-icon {
    padding: 10px 14px; border: 1px solid var(--border); border-radius: var(--radius-sm);
    background: var(--bg-card); color: var(--text); font-size: 13px;
    cursor: pointer; transition: var(--transition); font-family: var(--font);
}
.btn-icon:hover { border-color: var(--accent); }

/* ════════════ RESULTS LAYOUT ════════════ */
.results-layout { display: flex; height: calc(100vh - 140px); overflow: hidden; }
.results-sidebar {
    width: 420px; flex-shrink: 0; background: var(--surface);
    border-right: 1px solid var(--border); display: flex; flex-direction: column;
    overflow: hidden;
}
.results-map { flex: 1; position: relative; }
.results-map-wrap { flex: 1; position: relative; }
.results-map-wrap #map { width: 100%; height: 100%; }
#map { width: 100%; height: 100%; }

/* Tabs */
.tab-nav, .tab-bar { display: flex; border-bottom: 1px solid var(--border); overflow-x: auto; }
.tab-btn {
    flex: 1; padding: 12px 8px; border: none; background: none; color: var(--text-muted);
    font-size: 12px; font-weight: 600; cursor: pointer; transition: var(--transition);
    border-bottom: 2px solid transparent; white-space: nowrap; font-family: var(--font);
}
.tab-btn:hover { color: var(--text); }
.tab-btn.active { color: var(--accent); border-bottom-color: var(--accent); }
.tab-content { display: none; padding: 20px; flex: 1; overflow-y: auto; min-height: 0; }
.tab-content.active { display: flex; flex-direction: column; }

/* Results list */
.results-header { margin-bottom: 0; padding: 10px 20px; background: var(--surface); border-bottom: 1px solid var(--border); }
.results-header-row { display: flex; align-items: center; gap: 16px; }
.results-header-title { flex: 1; min-width: 0; }
.results-header h2 { font-family: var(--font-display); font-size: 18px; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
.results-intro { font-size: 12px; color: var(--text-muted); margin-top: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.btn-back { padding: 6px 14px; font-size: 12px; flex-shrink: 0; }

/* Search Container */
.search-container {
    background: var(--surface); padding-bottom: 8px;
    border-bottom: 1px solid var(--border);
    margin: -20px -20px 16px; padding: 16px 16px 12px;
}
.search-input-wrap {
    position: relative; margin-bottom: 12px;
}
.search-icon {
    position: absolute; left: 14px; top: 50%; transform: translateY(-50%);
    font-size: 14px; opacity: 0.5; pointer-events: none; z-index: 1;
}
.search-input-wrap input {
    width: 100%; padding: 12px 40px 12px 40px;
    background: rgba(255,255,255,0.04); border: 1px solid var(--border);
    border-radius: 12px; color: var(--text); font-size: 14px; font-family: var(--font);
    outline: none; transition: all 0.3s ease;
    backdrop-filter: blur(8px);
}
.search-input-wrap input::placeholder { color: var(--text-dim); }
.search-input-wrap input:focus {
    border-color: var(--accent); background: rgba(201,160,255,0.04);
    box-shadow: 0 0 0 3px rgba(201,160,255,0.08), 0 4px 20px rgba(0,0,0,0.15);
}
.search-clear {
    position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
    width: 28px; height: 28px; border-radius: 50%; border: none;
    background: rgba(255,255,255,0.08); color: var(--text-muted);
    font-size: 12px; cursor: pointer; transition: all 0.2s;
    display: flex; align-items: center; justify-content: center;
}
.search-clear:hover { background: rgba(255,107,157,0.15); color: var(--rose); }
.search-clear.hidden { display: none; }

/* Search Toolbar */
.search-toolbar { margin-bottom: 10px; }
.filter-chips { display: flex; flex-wrap: nowrap; gap: 6px; overflow-x: auto; scrollbar-width: none; -webkit-overflow-scrolling: touch; }
.filter-chips::-webkit-scrollbar { display: none; }
.filter-chip {
    padding: 7px 14px; border: 1px solid var(--border); border-radius: 50px;
    background: rgba(255,255,255,0.02); color: var(--text-muted); font-size: 12px; font-weight: 500;
    cursor: pointer; transition: all 0.25s ease; font-family: var(--font);
    white-space: nowrap; position: relative; overflow: hidden; flex-shrink: 0;
}
.filter-chip::after {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: var(--gradient-main); opacity: 0; transition: opacity 0.25s;
}
.filter-chip:hover { border-color: var(--accent-dark); background: rgba(201,160,255,0.06); transform: translateY(-1px); }
.filter-chip.active {
    background: rgba(201,160,255,0.15); border-color: var(--accent); color: var(--accent-light);
    box-shadow: 0 2px 12px rgba(201,160,255,0.15);
    font-weight: 600;
}

/* Sort Row */
.search-sort-row {
    display: flex; align-items: center; justify-content: space-between;
    margin-top: 10px; gap: 8px;
}
.results-meta { font-size: 12px; color: var(--text-dim); font-weight: 500; }
.sort-select {
    padding: 6px 12px; border: 1px solid var(--border); border-radius: 8px;
    background: rgba(255,255,255,0.03); color: var(--text-muted);
    font-size: 11px; font-family: var(--font); cursor: pointer;
    outline: none; transition: all 0.2s;
    -webkit-appearance: none; appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%238a84a0' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat; background-position: right 8px center;
    padding-right: 28px;
}
.sort-select:focus { border-color: var(--accent); }
.sort-select option { background: var(--surface); color: var(--text); }

/* Results Stats Bar */
.results-stats {
    display: flex; gap: 12px; margin-top: 10px;
    padding: 8px 12px;
    background: rgba(201,160,255,0.04); border: 1px solid rgba(201,160,255,0.08);
    border-radius: 8px; font-size: 11px;
}
.results-stat {
    display: flex; align-items: center; gap: 4px; color: var(--text-muted);
}
.results-stat strong { color: var(--accent-light); font-weight: 700; }

.results-list { display: flex; flex-direction: column; gap: 10px; }

/* Result card */
.result-card {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
    padding: 16px; cursor: pointer; transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1); position: relative;
    overflow: hidden;
}
.result-card::before {
    content: ''; position: absolute; top: 0; left: 0; width: 3px; height: 100%;
    background: var(--gradient-main); opacity: 0; transition: opacity 0.3s;
}
.result-card:hover { 
    background: var(--bg-card-hover); border-color: var(--accent-dark); 
    transform: translateX(4px); 
    box-shadow: 0 4px 20px rgba(0,0,0,0.15), -3px 0 20px rgba(201,160,255,0.08);
}
.result-card:hover::before { opacity: 1; }
.result-card.highlighted { 
    border-color: var(--accent); box-shadow: var(--shadow-glow); 
    background: var(--bg-card-hover);
    animation: cardHighlight 0.5s ease;
}
@keyframes cardHighlight {
    0% { transform: scale(1); } 50% { transform: scale(1.01); } 100% { transform: scale(1); }
}
.result-rank { position: absolute; top: 12px; right: 12px; font-size: 12px; color: var(--text-dim); font-weight: 700; }
.result-city { font-size: 16px; font-weight: 700; }
.result-country { font-size: 12px; color: var(--text-muted); margin-bottom: 8px; }
.result-score { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.score-bar { flex: 1; height: 6px; background: var(--surface-2); border-radius: 3px; overflow: hidden; }
.score-fill { height: 100%; border-radius: 3px; transition: width 0.8s ease; }
.score-value { font-size: 14px; font-weight: 700; color: var(--accent); min-width: 36px; text-align: right; }
.score-value.score-excellent { color: #4ade80; text-shadow: 0 0 8px rgba(74,222,128,0.3); }
.score-value.score-good { color: var(--accent-light); }
.score-value.score-medium { color: var(--gold); }
.score-value.score-low { color: var(--text-muted); }
.result-tags { display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 6px; }
.result-tag {
    padding: 2px 8px; border-radius: 50px; font-size: 10px; font-weight: 600;
    background: rgba(201,160,255,0.12); color: var(--accent-light);
}
.result-tag.love { background: rgba(255,107,157,0.15); color: var(--rose-light); }
.result-tag.career { background: rgba(255,215,110,0.12); color: var(--gold); }
.result-tag.peace { background: rgba(192,192,192,0.12); color: #ddd; }
.result-tag.luck { background: rgba(155,89,182,0.15); color: #d8a0ff; }
.result-tag.energy { background: rgba(255,68,68,0.15); color: #ff7777; }
.result-tag.creativity { background: rgba(65,105,225,0.15); color: #88aaff; }
.result-reason { font-size: 12px; color: var(--text-muted); line-height: 1.5; }

/* Compare */
.compare-slots { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
.compare-slot {
    flex: 1; padding: 20px; border-radius: var(--radius-sm);
    border: 2px dashed var(--border); text-align: center; transition: var(--transition);
}
.compare-slot.empty span { color: var(--text-dim); font-size: 14px; }
.compare-slot.empty small { color: var(--text-dim); font-size: 11px; display: block; margin-top: 4px; }
.compare-slot.filled { border-style: solid; border-color: var(--accent-dark); background: var(--bg-card); }
.slot-city { font-weight: 700; font-size: 16px; }
.slot-country { font-size: 12px; color: var(--text-muted); }
.slot-score { font-size: 24px; font-weight: 800; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; margin-top: 4px; }
.compare-vs { font-size: 16px; font-weight: 800; color: var(--text-dim); }
.compare-result { display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px; }
.compare-row { display: flex; align-items: center; gap: 8px; }
.compare-label { font-size: 12px; color: var(--text-muted); width: 80px; flex-shrink: 0; }
.compare-bar-wrap { flex: 1; display: flex; align-items: center; gap: 6px; }
.compare-bar { height: 8px; border-radius: 4px; transition: width 0.6s ease; }
.compare-bar.left { background: var(--gradient-main); }
.compare-bar.right { background: linear-gradient(135deg, #f093fb, #f5576c); }
.compare-val { font-size: 12px; font-weight: 700; min-width: 28px; }

/* Natal & Line toggles */
.natal-summary { display: flex; flex-direction: column; gap: 2px; }
.natal-summary h3 { font-family: var(--font-display); font-size: 16px; margin-bottom: 12px; text-align: center; }

/* Zodiac Wheel */
.natal-wheel-wrap {
    width: 100%; max-width: 420px; margin: 0 auto 16px; aspect-ratio: 1;
    position: relative;
}
.natal-wheel-svg {
    width: 100%; height: 100%;
    filter: drop-shadow(0 0 20px rgba(201,160,255,0.12));
}
.natal-section { margin-bottom: 14px; }
.natal-section-title {
    font-family: var(--font-display); font-size: 14px; margin-bottom: 8px;
    color: var(--accent-light); font-weight: 600; letter-spacing: 0.3px;
    padding-bottom: 6px; border-bottom: 1px solid rgba(201,160,255,0.1);
}
.natal-house-row .natal-planet { color: var(--text-muted); font-size: 13px; }
.natal-aspect-row .natal-planet { font-size: 16px; letter-spacing: 2px; }

.natal-dominant {
    text-align: center; padding: 10px 16px; margin-bottom: 14px;
    background: linear-gradient(135deg, rgba(201,160,255,0.08), rgba(255,215,110,0.08));
    border: 1px solid var(--border); border-radius: var(--radius-sm);
    font-size: 15px; font-weight: 600; color: var(--accent-light);
    letter-spacing: 0.3px;
}
.natal-grid { display: flex; flex-direction: column; gap: 3px; }
.natal-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; border-radius: var(--radius-xs); transition: var(--transition); }
.natal-row:hover { background: var(--bg-card); }
.natal-planet { font-size: 14px; font-weight: 500; }
.natal-sign { font-size: 13px; color: var(--accent-light); font-weight: 500; font-family: var(--font-mono, monospace); letter-spacing: 0.3px; }
.line-toggles { display: flex; flex-direction: column; gap: 6px; }
.line-toggle { display: flex; align-items: center; gap: 10px; padding: 8px 12px; border-radius: var(--radius-xs); cursor: pointer; transition: var(--transition); font-size: 13px; }
.line-toggle:hover { background: var(--bg-card); }
.line-toggle input { accent-color: var(--accent); }
.line-toggle-color { width: 12px; height: 12px; border-radius: 50%; }
.line-toggle-name { flex: 1; }
.line-toggle-extra { font-size: 11px; color: var(--text-muted); }

/* Timing */
.timing-analysis { display: flex; flex-direction: column; gap: 12px; }
.timing-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 16px; }
.timing-header { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.timing-icon { font-size: 18px; }
.timing-title { flex: 1; font-size: 13px; font-weight: 600; }
.timing-quality { padding: 2px 10px; border-radius: 50px; font-size: 11px; font-weight: 700; }
.timing-quality.good { background: rgba(110,231,200,0.15); color: var(--teal); }
.timing-quality.neutral { background: rgba(255,215,110,0.15); color: var(--gold); }
.timing-quality.challenging { background: rgba(255,107,157,0.15); color: var(--rose); }
.timing-desc { font-size: 13px; color: var(--text-muted); line-height: 1.5; }
.timing-date { font-size: 11px; color: var(--text-dim); margin-top: 6px; }

/* Map controls */
.map-controls { position: absolute; top: 12px; right: 12px; display: flex; flex-direction: row; gap: 6px; z-index: 500; flex-wrap: wrap; justify-content: flex-end; }
.map-ctrl-btn, .map-ctrl {
    padding: 7px 14px; border-radius: 50px; border: 1px solid var(--border);
    background: var(--surface); color: var(--text); font-size: 12px; font-weight: 500;
    cursor: pointer; transition: all 0.3s ease; white-space: nowrap; font-family: var(--font);
    display: flex; align-items: center; justify-content: center; gap: 4px;
    backdrop-filter: blur(12px); box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}
.map-ctrl-btn:hover, .map-ctrl:hover { 
    border-color: var(--accent); background: var(--bg-card-hover);
    box-shadow: 0 4px 16px rgba(0,0,0,0.3);
}
.map-ctrl-btn.active, .map-ctrl.active { 
    background: rgba(201,160,255,0.15); border-color: var(--accent); 
    box-shadow: 0 0 12px rgba(201,160,255,0.2);
}

/* Sidebar footer */
.sidebar-footer, .sidebar-actions { padding: 16px 20px; border-top: 1px solid var(--border); display: flex; gap: 8px; align-items: center; flex-shrink: 0; }

/* ════════════ PAGE CONTAINER / TITLE ════════════ */
.page-container { max-width: 800px; margin: 0 auto; padding: 100px 24px 80px; }
.page-title { font-family: var(--font-display); font-size: 38px; text-align: center; margin-bottom: 12px; }
.page-title em { font-style: italic; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
.page-subtitle { text-align: center; color: var(--text-muted); font-size: 15px; margin-bottom: 32px; }
.lifestyle-group { margin-bottom: 24px; }
.lifestyle-group h3 { font-size: 16px; font-weight: 600; margin-bottom: 8px; color: var(--text); }
.lifestyle-hint { font-size: 12px; color: var(--text-muted); margin-bottom: 10px; }
.option-detail { display: block; font-size: 11px; color: var(--text-muted); margin-top: 2px; font-weight: 400; }
.option-btn.selected .option-detail { color: var(--accent-light); opacity: 0.8; }

/* ════════════ DAILY HOROSCOPE ════════════ */
.daily-hero, .compat-hero, .moon-hero { text-align: center; padding-top: 80px; padding-bottom: 20px; }
.daily-hero h1, .compat-hero h1, .moon-hero h1 { font-family: var(--font-display); font-size: 38px; margin-bottom: 12px; }
.daily-hero h1 em, .compat-hero h1 em, .moon-hero h1 em { font-style: italic; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
.daily-hero p, .compat-hero p, .moon-hero p { color: var(--text-muted); font-size: 15px; }

.daily-form { max-width: 500px; margin: 32px auto; padding: 0 24px; }
.compat-form { max-width: 650px; margin: 32px auto; padding: 0 24px; display: flex; flex-wrap: wrap; align-items: center; gap: 20px; justify-content: center; }
.compat-form .btn-primary { margin-top: 8px; }
.mini-form { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 28px; }
.mini-form .form-row { margin-bottom: 16px; }
.mini-form .btn-hero { width: 100%; }

.daily-result { max-width: 700px; margin: 0 auto; padding: 0 24px 80px; }
.daily-card {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
    padding: 32px; margin-bottom: 20px;
}
.daily-sign-header { text-align: center; margin-bottom: 28px; }
.daily-sign-icon { font-size: 48px; display: block; margin-bottom: 8px; }
.daily-sign-name { font-family: var(--font-display); font-size: 26px; font-weight: 700; }
.daily-date { font-size: 13px; color: var(--text-muted); }
.daily-scores { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 28px; }
.daily-score-item { text-align: center; }
.daily-score-item .score-label { font-size: 12px; color: var(--text-muted); display: block; margin-bottom: 6px; }
.daily-score-item .score-ring {
    width: 60px; height: 60px; border-radius: 50%; margin: 0 auto 4px;
    display: flex; align-items: center; justify-content: center;
    font-size: 18px; font-weight: 800;
    background: conic-gradient(var(--accent) var(--pct), var(--surface-2) 0);
    position: relative;
}
.daily-score-item .score-ring::after {
    content: attr(data-score); position: absolute;
    width: 48px; height: 48px; border-radius: 50%;
    background: var(--surface); display: flex; align-items: center; justify-content: center;
    font-size: 16px; font-weight: 700; color: var(--accent-light);
}
.daily-msg { font-size: 15px; line-height: 1.8; color: var(--text); margin-bottom: 12px; }
.daily-msg strong { color: var(--accent-light); }
.daily-lucky { display: flex; flex-wrap: wrap; gap: 12px; margin-top: 16px; }
.daily-lucky-item {
    flex: 1; min-width: 120px; padding: 16px; background: var(--surface); border-radius: var(--radius-sm);
    text-align: center; border: 1px solid var(--border);
}
.daily-lucky-item .lucky-label { font-size: 11px; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 6px; }
.daily-lucky-item .lucky-val { font-size: 16px; font-weight: 700; }
.daily-affirmation {
    text-align: center; font-family: var(--font-display); font-style: italic;
    font-size: 18px; line-height: 1.6; padding: 28px; color: var(--accent-light);
    background: linear-gradient(135deg, rgba(201,160,255,0.08), rgba(255,107,157,0.05));
    border-radius: var(--radius); margin-top: 20px;
}

/* ════════════ COMPATIBILITY ════════════ */
.compat-persons { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; }
.compat-person { flex: 1; background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 24px; text-align: center; }
.compat-person-icon { font-size: 32px; margin-bottom: 8px; }
.compat-person h3 { font-size: 16px; margin-bottom: 16px; }
.compat-heart { font-size: 32px; color: var(--rose); animation: heartbeat 1.5s infinite; }
@keyframes heartbeat { 0%,100% { transform: scale(1); } 50% { transform: scale(1.2); } }

.compat-result { max-width: 700px; margin: 0 auto; padding: 0 24px 80px; }
.compat-overall {
    text-align: center; padding: 40px; margin-bottom: 28px;
    background: linear-gradient(135deg, rgba(201,160,255,0.08), rgba(255,107,157,0.05));
    border-radius: var(--radius); border: 1px solid var(--border);
}
.compat-overall-score {
    font-size: 72px; font-weight: 900;
    background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
.compat-overall-label { font-size: 16px; color: var(--text-muted); margin-top: 8px; }
.compat-summary { font-size: 15px; line-height: 1.7; color: var(--text); margin-top: 16px; }
.compat-categories { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 28px; }
.compat-cat {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
    padding: 20px; text-align: center;
}
.compat-cat-label { font-size: 12px; color: var(--text-muted); margin-bottom: 8px; display: block; }
.compat-cat-score { font-size: 28px; font-weight: 800; }
.compat-cat-bar { height: 6px; background: var(--surface-2); border-radius: 3px; margin-top: 8px; overflow: hidden; }
.compat-cat-fill { height: 100%; border-radius: 3px; }
.compat-aspects { display: flex; flex-direction: column; gap: 10px; }
.compat-aspect {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
    padding: 14px; display: flex; align-items: center; gap: 12px;
}
.compat-aspect-type { font-size: 11px; padding: 2px 8px; border-radius: 50px; font-weight: 700; }
.compat-aspect-type.harmony { background: rgba(110,231,200,0.15); color: var(--teal); }
.compat-aspect-type.tension { background: rgba(255,107,157,0.15); color: var(--rose); }
.compat-aspect-type.conjunction { background: rgba(255,215,110,0.15); color: var(--gold); }
.compat-aspect-type.opposition { background: rgba(155,89,182,0.15); color: #d8a0ff; }
.compat-aspect-planets { font-weight: 600; font-size: 14px; flex: 1; }
.compat-aspect-desc { font-size: 12px; color: var(--text-muted); }

/* ════════════ MOON CALENDAR ════════════ */
.moon-content { max-width: 800px; margin: 0 auto; padding: 32px 24px 80px; }
.moon-main {
    text-align: center; padding: 48px; margin-bottom: 28px;
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
}
.moon-emoji { font-size: 80px; display: block; margin-bottom: 16px; }
.moon-phase-name { font-family: var(--font-display); font-size: 30px; margin-bottom: 4px; }
.moon-illumination { font-size: 14px; color: var(--text-muted); margin-bottom: 16px; }
.moon-sign { font-size: 16px; color: var(--accent-light); margin-bottom: 16px; }
.moon-desc { font-size: 15px; color: var(--text); line-height: 1.7; max-width: 500px; margin: 0 auto 20px; }
.moon-dates { display: flex; justify-content: center; gap: 32px; }
.moon-date-item { text-align: center; }
.moon-date-item small { display: block; font-size: 12px; color: var(--text-muted); }
.moon-date-item span { font-weight: 700; }
.moon-rituals { margin-top: 28px; }
.moon-rituals h3 { font-family: var(--font-display); font-size: 20px; margin-bottom: 16px; }
.moon-ritual-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; }
.moon-ritual {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
    padding: 16px; font-size: 14px; transition: var(--transition);
}
.moon-ritual:hover { background: var(--bg-card-hover); border-color: var(--accent-dark); }

/* ════════════ SHARE CARD ════════════ */
.share-card { background: var(--surface); border: 1px solid var(--border); padding: 32px; max-width: 480px; }
.share-card-inner { background: linear-gradient(135deg, #0e0e2e, #1a0a35); border-radius: var(--radius); padding: 32px; margin-bottom: 20px; }
.share-header { text-align: center; margin-bottom: 24px; }
.share-logo { font-family: var(--font-display); font-size: 20px; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
.share-subtitle { font-size: 14px; color: var(--text-muted); margin-top: 4px; }
.share-top3 { display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px; }
.share-city-row { display: flex; align-items: center; gap: 12px; padding: 12px; background: rgba(255,255,255,0.04); border-radius: var(--radius-sm); }
.share-city-rank { width: 28px; height: 28px; border-radius: 50%; background: var(--gradient-main); display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 13px; }
.share-city-info { flex: 1; }
.share-city-name { font-weight: 700; font-size: 15px; }
.share-city-country { font-size: 12px; color: var(--text-muted); }
.share-city-score { font-size: 18px; font-weight: 800; color: var(--accent); }
.share-natal { text-align: center; font-size: 14px; color: var(--accent-light); padding: 12px; }
.share-footer { text-align: center; font-size: 12px; color: var(--text-dim); margin-top: 12px; }
.share-actions { text-align: center; }

/* ════════════ LOADING ════════════ */
.loading-overlay { position: fixed; inset: 0; z-index: 3000; background: var(--loading-bg, rgba(7,7,26,0.95)); display: flex; align-items: center; justify-content: center; }
.loading-overlay.hidden { display: none; }
.loading-content { text-align: center; }
.loading-spinner { font-size: 48px; animation: spin 2s linear infinite; display: inline-block; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
#loading-text { font-size: 16px; margin-top: 16px; }
.loading-sub { font-size: 13px; color: var(--text-muted); margin-top: 4px; }
.loading-progress, .loading-bar-wrap { width: 280px; height: 4px; background: var(--surface-2); border-radius: 2px; margin: 20px auto 0; overflow: hidden; }
.loading-bar { height: 100%; background: var(--gradient-main); border-radius: 2px; transition: width 0.4s ease; width: 0; }

/* ════════════ TOAST ════════════ */
.toast {
    position: fixed; bottom: 32px; left: 50%; transform: translateX(-50%);
    padding: 14px 28px; border-radius: var(--radius-sm);
    background: var(--surface); border: 1px solid var(--accent);
    color: var(--text); font-size: 14px; font-weight: 500;
    z-index: 4000; box-shadow: var(--shadow);
    animation: toastSlide 0.3s ease;
}
.toast.hidden { display: none; }
@keyframes toastSlide { from { opacity: 0; transform: translateX(-50%) translateY(20px); } to { opacity: 1; transform: translateX(-50%) translateY(0); } }

/* ════════════ LEAFLET OVERRIDES ════════════ */
.leaflet-popup-content-wrapper { 
    background: var(--surface) !important; color: var(--text) !important; 
    border-radius: 12px !important; border: 1px solid var(--border) !important; 
    box-shadow: 0 12px 40px rgba(0,0,0,0.4), 0 0 30px rgba(201,160,255,0.08) !important;
    padding: 0 !important;
}
.leaflet-popup-content { margin: 0 !important; padding: 14px 16px !important; min-width: 200px; }
.leaflet-popup-tip { background: var(--surface) !important; }
.leaflet-popup-close-button { color: var(--text-muted) !important; font-size: 18px !important; top: 6px !important; right: 8px !important; }
.leaflet-popup-close-button:hover { color: var(--rose) !important; }

/* Popup content */
.popup-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
.popup-rank { font-size: 12px; font-weight: 700; color: var(--gold); }
.popup-flag { font-size: 14px; }
.popup-city { font-weight: 700; font-size: 16px; margin-bottom: 2px; color: var(--text); }
.popup-country { font-size: 12px; color: var(--text-muted); margin-bottom: 8px; }
.popup-score-bar { 
    height: 6px; background: var(--surface-2); border-radius: 3px; 
    overflow: hidden; position: relative; margin-bottom: 8px;
}
.popup-score-fill { height: 100%; border-radius: 3px; transition: width 0.6s ease; }
.popup-score-val { 
    position: absolute; right: 0; top: -18px; 
    font-size: 14px; font-weight: 800;
}
.popup-tags { font-size: 11px; color: var(--accent); margin-bottom: 6px; font-weight: 500; }
.popup-reason { font-size: 12px; color: var(--text-muted); line-height: 1.5; }

/* Marker styles */
.astro-marker {
    width: 14px; height: 14px; border-radius: 50%;
    background: var(--accent); border: 2px solid rgba(255,255,255,0.8);
    box-shadow: 0 0 10px rgba(201,160,255,0.5);
    transition: transform 0.2s, box-shadow 0.2s;
}
.astro-marker:hover { transform: scale(1.4); box-shadow: 0 0 18px rgba(201,160,255,0.8); }
.astro-marker-mid {
    width: 20px; height: 20px; border-radius: 50%;
    background: var(--accent); border: 2px solid rgba(255,255,255,0.9);
    box-shadow: 0 0 14px rgba(201,160,255,0.5);
    transition: transform 0.2s, box-shadow 0.2s;
}
.astro-marker-mid:hover { transform: scale(1.3); box-shadow: 0 0 22px rgba(201,160,255,0.7); }
.astro-marker-top {
    width: 32px; height: 32px; border-radius: 50%;
    background: var(--gradient-main); border: 2.5px solid var(--gold);
    box-shadow: 0 0 20px rgba(201,160,255,0.6), 0 0 40px rgba(255,215,110,0.2);
    transition: transform 0.2s, box-shadow 0.2s;
    animation: markerPulse 2.5s ease-in-out infinite;
}
.astro-marker-top:hover { transform: scale(1.2); box-shadow: 0 0 30px rgba(201,160,255,0.8); }
@keyframes markerPulse {
    0%, 100% { box-shadow: 0 0 20px rgba(201,160,255,0.6), 0 0 40px rgba(255,215,110,0.2); }
    50% { box-shadow: 0 0 30px rgba(201,160,255,0.8), 0 0 60px rgba(255,215,110,0.3); }
}

/* Map Legend */
.map-legend {
    position: absolute; bottom: 16px; left: 16px; z-index: 500;
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 10px; font-size: 12px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.3);
    backdrop-filter: blur(12px); overflow: hidden;
    max-width: 180px; transition: all 0.3s ease;
}
.map-legend.collapsed .map-legend-body { display: none; }
.map-legend.collapsed .legend-arrow { transform: rotate(-90deg); }
.map-legend-toggle {
    display: flex; align-items: center; justify-content: space-between;
    padding: 8px 12px; cursor: pointer; font-weight: 600; color: var(--text);
    transition: background 0.2s;
}
.map-legend-toggle:hover { background: var(--bg-card); }
.legend-arrow { font-size: 10px; transition: transform 0.3s; color: var(--text-muted); }
.map-legend-body { padding: 4px 12px 10px; }
.legend-item {
    display: flex; align-items: center; gap: 8px;
    padding: 3px 0; color: var(--text-muted); font-size: 11px;
}
.legend-line { width: 16px; height: 3px; border-radius: 2px; flex-shrink: 0; }
.legend-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.legend-dot.top { background: var(--gradient-main); border: 1.5px solid var(--gold); }
.legend-dot.normal { background: var(--accent); border: 1.5px solid rgba(255,255,255,0.6); }
.legend-sep { height: 1px; background: var(--border); margin: 4px 0; }

/* Map City Peek (bottom center) */
.map-city-peek {
    position: absolute; bottom: 16px; left: 50%; transform: translateX(-50%) translateY(10px);
    z-index: 500; padding: 8px 20px; border-radius: 50px;
    background: var(--surface); border: 1px solid var(--border);
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    backdrop-filter: blur(12px);
    display: flex; align-items: center; gap: 12px;
    opacity: 0; pointer-events: none;
    transition: all 0.35s cubic-bezier(0.23, 1, 0.32, 1);
}
.map-city-peek.visible { opacity: 1; transform: translateX(-50%) translateY(0); pointer-events: auto; }
.peek-name { font-size: 13px; font-weight: 600; color: var(--text); }
.peek-score { font-size: 15px; font-weight: 800; }

/* ════════════ RESPONSIVE ════════════ */
@media (max-width: 900px) {
    .results-layout { flex-direction: column; }
    .results-sidebar { width: 100%; flex: 1; min-height: 0; overflow: hidden; overscroll-behavior: contain; -webkit-overflow-scrolling: touch; }
    .results-map, .results-map-wrap { order: -1; height: 35vh; min-height: 200px; flex-shrink: 0; }
    .page-container { padding: 80px 16px 60px; }
    .page-title { font-size: 28px; }
}
/* ════════════ AI BADGE ════════════ */
.ai-badge {
    background: linear-gradient(135deg, var(--accent), var(--gold)) !important;
    color: #07071a !important;
    font-weight: 700;
}

/* ════════════ FORMS: TEXTAREA & MOOD SELECT ════════════ */
textarea, .mood-select {
    width: 100%; padding: 12px 16px;
    background: var(--bg-card); border: 1px solid var(--border);
    border-radius: var(--radius-sm); color: var(--text);
    font-size: 14px; font-family: var(--font); line-height: 1.6;
    resize: vertical; outline: none; transition: var(--transition);
}
textarea:focus, .mood-select:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(201,160,255,0.1); }
textarea::placeholder { color: var(--text-dim); }
.mood-select { cursor: pointer; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%238a84a0' stroke-width='1.5' fill='none'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 16px center; padding-right: 40px; }
.mood-select option { background: var(--surface); color: var(--text); padding: 8px; }

.tarot-form, .crystal-form, .dream-form { max-width: 500px; margin: 32px auto; padding: 0 24px; }
.tarot-form-card {
    background: linear-gradient(160deg, rgba(201,160,255,0.06), rgba(255,107,157,0.03));
    border: 1px solid var(--border); border-radius: var(--radius);
    padding: 32px; position: relative; overflow: hidden;
}
.tarot-form-card::before {
    content: '✦'; position: absolute; top: -20px; right: -20px;
    font-size: 120px; opacity: 0.03; transform: rotate(15deg);
}
.btn-sparkle { margin-right: 6px; }

/* ════════════ AI LOADING ════════════ */
.ai-loading { text-align: center; padding: 60px 24px; }
.ai-loading-spinner {
    width: 48px; height: 48px; margin: 0 auto 20px;
    border: 3px solid var(--border); border-top-color: var(--accent);
    border-radius: 50%; animation: spin 1s linear infinite;
}
.ai-loading-text { font-size: 18px; font-weight: 600; color: var(--text); margin-bottom: 8px; }
.ai-loading-sub { font-size: 13px; color: var(--text-muted); }

.ai-error { text-align: center; padding: 40px; background: rgba(255,107,157,0.08); border: 1px solid rgba(255,107,157,0.2); border-radius: var(--radius); }
.ai-error-icon { font-size: 36px; display: block; margin-bottom: 12px; }
.ai-error p { color: var(--rose-light); font-size: 14px; }

.reset-btn { display: block; margin: 28px auto 40px; }

/* ════════════ TAROT PAGE — REAL CARD CEREMONY ════════════ */
.tarot-ceremony {
    position: relative; max-width: 900px; margin: 0 auto; padding: 40px 24px 60px;
    text-align: center; overflow: hidden; min-height: 500px;
}
.tarot-particles {
    position: absolute; inset: 0; pointer-events: none; overflow: hidden; z-index: 0;
}
.tarot-particle {
    position: absolute; bottom: -20px; color: var(--accent);
    opacity: 0; animation: particleFloat linear infinite;
}
@keyframes particleFloat {
    0% { opacity: 0; transform: translateY(0) rotate(0deg); }
    10% { opacity: 0.6; }
    90% { opacity: 0.3; }
    100% { opacity: 0; transform: translateY(-500px) rotate(360deg); }
}

.tarot-table-title { position: relative; z-index: 2; margin-bottom: 40px; }
.tarot-glow-text {
    font-family: var(--font-display); font-size: 28px; font-weight: 700;
    background: var(--gradient-main); -webkit-background-clip: text; background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: glowPulse 2s ease-in-out infinite;
}
.tarot-sub-msg { color: var(--text-muted); font-size: 14px; margin-top: 8px; }
@keyframes glowPulse {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.3) drop-shadow(0 0 20px rgba(201,160,255,0.4)); }
}

.tarot-deck {
    display: flex; justify-content: center; gap: 16px; flex-wrap: wrap;
    position: relative; z-index: 2; perspective: 1200px;
    padding: 0 8px;
}

/* Card slot */
.tarot-card-slot {
    width: min(200px, 28vw); position: relative; cursor: pointer;
    opacity: 0; transform: translateY(60px) scale(0.7);
    transition: opacity 0.6s ease, transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    flex-shrink: 0;
}
.tarot-card-slot.dealt { opacity: 1; transform: translateY(0) scale(1); }
.tarot-card-slot:hover:not(.flipped) { transform: translateY(-8px) scale(1.03); }

/* 3D card flip */
.tarot-card-3d {
    width: 100%; aspect-ratio: 2/3.1; position: relative;
    transform-style: preserve-3d; transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}
.tarot-card-slot.flipped .tarot-card-3d { transform: rotateY(180deg); }

.tarot-face {
    position: absolute; inset: 0; backface-visibility: hidden;
    border-radius: var(--radius); overflow: hidden;
}

/* Card back (face-down) */
.tarot-back {
    background: linear-gradient(160deg, var(--surface-2, #1a0e3e), var(--surface, #0e0e2a));
    border: 2px solid var(--accent-dark);
    display: flex; align-items: center; justify-content: center;
}
.tarot-back-design {
    width: 100%; height: 100%; position: relative;
    display: flex; align-items: center; justify-content: center;
}
.tarot-back-pattern {
    position: absolute; inset: 12px; border: 1px solid rgba(201,160,255,0.2);
    border-radius: 8px;
    background: repeating-conic-gradient(rgba(201,160,255,0.05) 0% 25%, transparent 0% 50%) 50% / 20px 20px;
}
.tarot-back-pattern::before {
    content: ''; position: absolute; inset: 8px;
    border: 1px solid rgba(201,160,255,0.15); border-radius: 6px;
}
.tarot-back-symbol {
    position: relative; z-index: 1; font-size: 40px;
    background: var(--gradient-main); -webkit-background-clip: text; background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: symbolPulse 2s ease-in-out infinite;
}
@keyframes symbolPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.15); }
}

/* Shimmer on back */
.tarot-back::after {
    content: ''; position: absolute; top: -50%; left: -50%;
    width: 200%; height: 200%;
    background: linear-gradient(45deg, transparent 30%, rgba(201,160,255,0.08) 50%, transparent 70%);
    animation: cardShimmer 3s ease-in-out infinite;
}
@keyframes cardShimmer {
    0% { transform: translateX(-100%) translateY(-100%); }
    100% { transform: translateX(100%) translateY(100%); }
}

/* Card front (face-up) */
.tarot-front {
    transform: rotateY(180deg);
    background: linear-gradient(160deg, rgba(201,160,255,0.12), rgba(255,107,157,0.06));
    border: 2px solid var(--accent);
    box-shadow: 0 0 30px rgba(201,160,255,0.2);
}
.tarot-front-content {
    padding: 20px 12px; text-align: center; height: 100%;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    overflow-y: auto;
}
.tarot-front-content.reversed .tarot-emoji { transform: rotate(180deg); }
.tarot-front-content .tarot-position {
    font-size: 11px; font-weight: 700; text-transform: uppercase;
    letter-spacing: 2px; color: var(--text-muted); margin-bottom: 12px;
}
.tarot-front-content .tarot-emoji { font-size: clamp(32px, 6vw, 52px); margin-bottom: 8px; transition: transform 0.3s; flex-shrink: 0; }
.tarot-front-content .tarot-name {
    font-family: var(--font-display); font-size: clamp(13px, 2vw, 18px); font-weight: 700;
    color: var(--accent-light); margin-bottom: 6px; flex-shrink: 0;
}
.tarot-front-content .tarot-meaning {
    font-size: clamp(10px, 1.4vw, 12px); color: var(--text-muted); line-height: 1.5;
    flex-shrink: 1; overflow-y: auto;
}

/* Slot label */
.tarot-slot-label {
    margin-top: 12px; font-size: 12px; text-transform: uppercase;
    letter-spacing: 2px; color: var(--text-dim); font-weight: 600;
}

/* Flip burst particles */
.flip-spark {
    position: absolute; top: 50%; left: 50%; width: 6px; height: 6px;
    background: var(--accent); border-radius: 50%; pointer-events: none;
    animation: sparkBurst 0.6s ease-out forwards;
}
@keyframes sparkBurst {
    0% { transform: translate(-50%, -50%) translate(0, 0); opacity: 1; }
    100% { transform: translate(-50%, -50%) translate(var(--tx), var(--ty)); opacity: 0; }
}

/* Hint text */
.tarot-ceremony-hint {
    margin-top: 24px; font-size: 14px; color: var(--text-dim);
    position: relative; z-index: 2;
    transition: all 0.4s ease;
}
.tarot-ceremony-hint.hint-ready {
    color: var(--accent); font-weight: 600; font-size: 16px;
    animation: hintBounce 1.5s ease-in-out infinite;
}
@keyframes hintBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
}

/* Overall section */
.tarot-overall {
    max-width: 700px; margin: 32px auto 0; padding: 32px;
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
    text-align: center;
}
.tarot-overall h3 { font-family: var(--font-display); font-size: 22px; margin-bottom: 16px; }
.tarot-overall p { font-size: 15px; line-height: 1.8; color: var(--text); margin-bottom: 16px; }
.tarot-advice { font-size: 14px; color: var(--accent-light); padding: 16px; background: rgba(201,160,255,0.06); border-radius: var(--radius-sm); }
.tarot-energy { margin-bottom: 20px; }
.energy-label { font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-dim); display: block; margin-bottom: 4px; }
.energy-value { font-size: 20px; font-weight: 700; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }

/* Animate in */
.animate-in { animation: slideUp 0.6s ease both; }
@keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

/* ════════════ CRYSTAL PAGE — MYSTIC LOADING ════════════ */
.crystal-loading-scene {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    min-height: 400px; position: relative; padding: 40px;
}
.crystal-orbit {
    width: 200px; height: 200px; position: relative;
    animation: orbitSpin 8s linear infinite;
}
@keyframes orbitSpin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

.crystal-orb {
    position: absolute; font-size: 28px;
    animation: orbFloat 2s ease-in-out infinite alternate;
}
.crystal-orb.orb-1 { top: 0; left: 50%; transform: translateX(-50%); animation-delay: 0s; }
.crystal-orb.orb-2 { top: 35%; right: 0; animation-delay: 0.4s; }
.crystal-orb.orb-3 { bottom: 0; left: 50%; transform: translateX(-50%); animation-delay: 0.8s; }
.crystal-orb.orb-4 { top: 35%; left: 0; animation-delay: 1.2s; }
.crystal-orb.orb-5 { top: 50%; left: 50%; transform: translate(-50%, -50%); animation-delay: 0.6s; font-size: 20px; }
@keyframes orbFloat { from { transform: scale(1); } to { transform: scale(1.2); } }

.crystal-center-gem {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    font-size: 56px; z-index: 2;
    animation: gemPulse 1.5s ease-in-out infinite;
}
@keyframes gemPulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); filter: brightness(1); }
    50% { transform: translate(-50%, -50%) scale(1.15); filter: brightness(1.4) drop-shadow(0 0 30px rgba(201,160,255,0.5)); }
}

.crystal-loading-rings {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%); pointer-events: none;
}
.crystal-ring {
    position: absolute; border-radius: 50%;
    border: 1px solid rgba(201,160,255,0.2);
    animation: ringExpand 2.5s ease-out infinite;
}
.crystal-ring.ring-1 { width: 120px; height: 120px; top: -60px; left: -60px; animation-delay: 0s; }
.crystal-ring.ring-2 { width: 180px; height: 180px; top: -90px; left: -90px; animation-delay: 0.8s; }
.crystal-ring.ring-3 { width: 240px; height: 240px; top: -120px; left: -120px; animation-delay: 1.6s; }
@keyframes ringExpand {
    0% { transform: scale(0.5); opacity: 0.8; border-color: rgba(201,160,255,0.4); }
    100% { transform: scale(1.5); opacity: 0; border-color: rgba(201,160,255,0); }
}

.crystal-loading-msg {
    margin-top: 40px; font-family: var(--font-display); font-size: 18px;
    color: var(--accent-light); animation: glowPulse 2s ease-in-out infinite;
}
.crystal-energy-bar {
    width: 200px; height: 3px; background: var(--surface-2);
    border-radius: 2px; margin-top: 16px; overflow: hidden;
}
.crystal-energy-fill {
    height: 100%; width: 0; border-radius: 2px;
    background: var(--gradient-main);
    animation: energyFill 6s ease-in-out forwards;
}
@keyframes energyFill {
    0% { width: 0; }
    30% { width: 40%; }
    60% { width: 65%; }
    80% { width: 80%; }
    100% { width: 95%; }
}

/* Crystal reveal */
.crystal-reveal > * { animation: staggerReveal 0.7s ease both; }
.crystal-reveal .stagger-1 { animation-delay: 0.1s; }
.crystal-reveal .stagger-2 { animation-delay: 0.3s; }
.crystal-reveal .stagger-3 { animation-delay: 0.5s; }
.crystal-reveal .stagger-4 { animation-delay: 0.7s; }
.crystal-reveal .stagger-5 { animation-delay: 0.9s; }
.crystal-reveal .stagger-6 { animation-delay: 1.1s; }
@keyframes staggerReveal {
    from { opacity: 0; transform: translateY(30px) scale(0.95); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}

.crystal-main-card {
    max-width: 500px; margin: 20px auto 24px; padding: 40px 32px;
    text-align: center; border-radius: var(--radius);
    background: linear-gradient(160deg, rgba(201,160,255,0.1), rgba(110,231,200,0.05));
    border: 2px solid var(--accent-dark); position: relative; overflow: hidden;
}
.crystal-main-glow {
    position: absolute; inset: -50%; 
    background: radial-gradient(circle at center, rgba(201,160,255,0.1), transparent 70%);
    animation: crystalGlow 3s ease-in-out infinite;
    pointer-events: none;
}
@keyframes crystalGlow {
    0%, 100% { opacity: 0.5; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.1); }
}
.crystal-main-emoji { font-size: 56px; margin-bottom: 12px; animation: gemFloat 3s ease-in-out infinite; }
@keyframes gemFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
.crystal-main-name { font-family: var(--font-display); font-size: 28px; margin-bottom: 12px; background: var(--gradient-cool); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
.crystal-main-benefit { font-size: 15px; line-height: 1.7; color: var(--text); margin-bottom: 12px; }
.crystal-main-use { font-size: 13px; color: var(--text-muted); }

.crystal-support-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; max-width: 700px; margin: 0 auto 28px; padding: 0 24px; }
.crystal-support-card {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
    padding: 20px; text-align: center; transition: var(--transition);
    animation: staggerReveal 0.5s ease both;
}
.crystal-support-card:hover { border-color: var(--accent-dark); transform: translateY(-4px); box-shadow: var(--shadow-glow); }
.crystal-support-emoji { font-size: 28px; display: block; margin-bottom: 8px; }
.crystal-support-card strong { font-size: 14px; display: block; margin-bottom: 4px; }
.crystal-support-card p { font-size: 12px; color: var(--text-muted); }

.wellness-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; max-width: 700px; margin: 0 auto 28px; padding: 0 24px; }
.wellness-card {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
    padding: 20px; transition: var(--transition);
}
.wellness-card:hover { border-color: var(--accent-dark); transform: translateY(-3px); }
.wellness-card h4 { font-size: 14px; margin-bottom: 10px; font-weight: 600; }
.wellness-value { font-size: 18px; font-weight: 700; color: var(--accent-light); margin-bottom: 6px; }
.wellness-card p { font-size: 13px; color: var(--text-muted); line-height: 1.6; margin-bottom: 4px; }
.color-tips { display: flex; flex-direction: column; gap: 6px; font-size: 13px; color: var(--text-muted); }
.color-tips strong { color: var(--text); }
.mantra { font-family: var(--font-display); font-style: italic; color: var(--accent-light); margin-top: 8px; font-size: 14px; }

.crystal-ritual {
    max-width: 700px; margin: 0 auto 24px; padding: 24px;
    background: linear-gradient(135deg, rgba(255,215,110,0.06), rgba(201,160,255,0.04));
    border: 1px solid var(--border); border-radius: var(--radius);
}
.crystal-ritual h3 { font-family: var(--font-display); font-size: 18px; margin-bottom: 12px; }
.crystal-ritual p { font-size: 14px; line-height: 1.7; color: var(--text); }

.crystal-affirmation {
    max-width: 700px; margin: 0 auto 16px;
    text-align: center; font-family: var(--font-display); font-style: italic;
    font-size: 18px; line-height: 1.6; padding: 28px; color: var(--accent-light);
    background: linear-gradient(135deg, rgba(201,160,255,0.08), rgba(110,231,200,0.05));
    border-radius: var(--radius);
}

/* ════════════ DREAM PAGE — DREAMY LOADING ════════════ */
.dream-loading-scene {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    min-height: 350px; position: relative; padding: 40px;
}
.dream-clouds { position: relative; width: 250px; height: 120px; }
.dream-cloud {
    position: absolute; font-size: 36px; opacity: 0.6;
    animation: cloudDrift 4s ease-in-out infinite alternate;
}
.dream-cloud.c1 { top: 0; left: 0; animation-delay: 0s; }
.dream-cloud.c2 { top: 10px; left: 60%; animation-delay: 0.5s; }
.dream-cloud.c3 { top: 40px; left: 30%; animation-delay: 1s; font-size: 48px; }
.dream-cloud.c4 { top: 60px; left: 70%; animation-delay: 1.5s; }
.dream-cloud.c5 { top: 20px; left: 85%; animation-delay: 0.7s; font-size: 24px; }
@keyframes cloudDrift {
    from { transform: translateX(0) translateY(0); opacity: 0.4; }
    to { transform: translateX(-20px) translateY(-10px); opacity: 0.8; }
}

.dream-eye {
    width: 80px; height: 40px; border-radius: 50%; margin-top: 20px;
    background: radial-gradient(circle, var(--accent) 30%, transparent 70%);
    position: relative; overflow: hidden;
    animation: eyeBlink 3s ease-in-out infinite;
}
.dream-eye-iris {
    width: 20px; height: 20px; border-radius: 50%;
    background: var(--gradient-main); position: absolute;
    top: 50%; left: 50%; transform: translate(-50%, -50%);
    box-shadow: 0 0 20px rgba(201,160,255,0.5);
}
@keyframes eyeBlink {
    0%, 100% { transform: scaleY(1); }
    45% { transform: scaleY(1); }
    50% { transform: scaleY(0.1); }
    55% { transform: scaleY(1); }
}

.dream-loading-msg {
    margin-top: 24px; font-family: var(--font-display); font-size: 18px;
    color: var(--accent-light);
}
.dream-loading-dots { display: flex; gap: 4px; margin-top: 8px; }
.dream-loading-dots span {
    font-size: 24px; color: var(--accent); animation: dotPulse 1.4s ease-in-out infinite;
}
.dream-loading-dots span:nth-child(2) { animation-delay: 0.2s; }
.dream-loading-dots span:nth-child(3) { animation-delay: 0.4s; }
@keyframes dotPulse { 0%, 100% { opacity: 0.2; } 50% { opacity: 1; } }

/* Dream reveal */
.dream-reveal > * { animation: staggerReveal 0.7s ease both; }
.dream-reveal .stagger-1 { animation-delay: 0.1s; }
.dream-reveal .stagger-2 { animation-delay: 0.3s; }
.dream-reveal .stagger-3 { animation-delay: 0.5s; }
.dream-reveal .stagger-4 { animation-delay: 0.7s; }
.dream-reveal .stagger-5 { animation-delay: 0.9s; }
.dream-reveal .stagger-6 { animation-delay: 1.1s; }

.dream-header { text-align: center; padding: 32px 24px 16px; max-width: 700px; margin: 0 auto; }
.dream-emotion { font-size: 14px; font-weight: 600; color: var(--rose-light); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
.dream-title { font-family: var(--font-display); font-size: 28px; font-weight: 700; }

.dream-interpretation {
    max-width: 700px; margin: 0 auto 28px; padding: 32px;
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
}
.dream-interpretation p { font-size: 15px; line-height: 1.8; color: var(--text); }

.dream-symbols { max-width: 700px; margin: 0 auto 28px; padding: 0 24px; }
.dream-symbols h3 { font-family: var(--font-display); font-size: 18px; margin-bottom: 16px; }
.dream-symbols-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; }
.dream-symbol-card {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
    padding: 16px; transition: var(--transition);
    animation: staggerReveal 0.5s ease both;
}
.dream-symbol-card:hover { border-color: var(--accent-dark); transform: translateY(-3px); }
.dream-symbol-card strong { font-size: 14px; display: block; margin-bottom: 4px; color: var(--accent-light); }
.dream-symbol-card p { font-size: 12px; color: var(--text-muted); line-height: 1.5; }

.dream-message {
    max-width: 700px; margin: 0 auto 28px; padding: 28px;
    text-align: center;
    background: linear-gradient(135deg, rgba(201,160,255,0.08), rgba(255,107,157,0.05));
    border-radius: var(--radius);
}
.dream-message h3 { font-family: var(--font-display); font-size: 18px; margin-bottom: 12px; }
.dream-message p { font-size: 15px; line-height: 1.7; color: var(--text); }

.dream-advice { max-width: 700px; margin: 0 auto; padding: 0 24px; display: flex; flex-direction: column; gap: 10px; }
.dream-advice-item {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
    padding: 16px; font-size: 14px; color: var(--text-muted); line-height: 1.6;
    transition: var(--transition);
}
.dream-advice-item:hover { border-color: var(--accent-dark); }
.dream-advice-item strong { color: var(--text); }

/* ════════════ SCROLL REVEAL ════════════ */
.sr-hidden {
    opacity: 0; transform: translateY(30px);
    transition: opacity 0.7s ease, transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
}
.sr-visible {
    opacity: 1; transform: translateY(0);
}
/* Stagger children */
.features-grid .sr-visible:nth-child(1) { transition-delay: 0s; }
.features-grid .sr-visible:nth-child(2) { transition-delay: 0.08s; }
.features-grid .sr-visible:nth-child(3) { transition-delay: 0.16s; }
.features-grid .sr-visible:nth-child(4) { transition-delay: 0.24s; }
.features-grid .sr-visible:nth-child(5) { transition-delay: 0.32s; }
.features-grid .sr-visible:nth-child(6) { transition-delay: 0.40s; }
.features-grid .sr-visible:nth-child(7) { transition-delay: 0.48s; }
.features-grid .sr-visible:nth-child(8) { transition-delay: 0.56s; }
.testimonials-grid .sr-visible:nth-child(1) { transition-delay: 0s; }
.testimonials-grid .sr-visible:nth-child(2) { transition-delay: 0.1s; }
.testimonials-grid .sr-visible:nth-child(3) { transition-delay: 0.2s; }

/* ════════════ HERO FLOAT PARTICLES ════════════ */
.hero-float-particles {
    position: absolute; inset: 0; z-index: 1; pointer-events: none; overflow: hidden;
}
.hero-particle {
    position: absolute; color: var(--accent); opacity: 0;
    animation: heroFloat linear infinite;
}
@keyframes heroFloat {
    0% { opacity: 0; transform: translateY(0) scale(0.5); }
    15% { opacity: 0.4; }
    85% { opacity: 0.2; }
    100% { opacity: 0; transform: translateY(-100px) scale(1) rotate(180deg); }
}

/* ════════════ PRICING CARD HOVER ════════════ */
.pricing-card { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
.pricing-card:hover { transform: translateY(-6px); box-shadow: 0 16px 50px rgba(0,0,0,0.3); }
.pricing-card.featured:hover { box-shadow: 0 16px 50px rgba(201,160,255,0.2); }

/* ════════════ RESULT CARD HOVER ════════════ */
.result-card { transition: all 0.3s ease; }
.result-card:hover { background: var(--bg-card-hover); transform: translateX(4px); }

/* ════════════ ZODIAC LOADING (DAILY) ════════════ */
.zodiac-loading {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    min-height: 400px; padding: 40px;
}
.zodiac-wheel {
    width: 200px; height: 200px; position: relative;
    margin-bottom: 32px;
}
.zodiac-ring {
    width: 100%; height: 100%; position: relative;
    animation: orbitSpin 15s linear infinite;
}
.zodiac-sym {
    position: absolute; font-size: 20px; color: var(--accent-light);
    top: 50%; left: 50%;
    transform: rotate(calc(var(--i) * 30deg)) translateY(-90px) rotate(calc(var(--i) * -30deg));
    animation: orbFloat 2s ease-in-out infinite alternate;
}
.zodiac-center {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    font-size: 56px; z-index: 2;
    animation: gemPulse 1.5s ease-in-out infinite;
}
.zodiac-loading-msg {
    font-family: var(--font-display); font-size: 18px;
    color: var(--accent-light); animation: glowPulse 2s ease-in-out infinite;
}
.zodiac-dots { display: flex; gap: 6px; margin-top: 12px; }
.zodiac-dots span {
    font-size: 16px; color: var(--accent); animation: dotPulse 1.4s ease-in-out infinite;
}
.zodiac-dots span:nth-child(2) { animation-delay: 0.2s; }
.zodiac-dots span:nth-child(3) { animation-delay: 0.4s; }

/* ════════════ DAILY REVEAL (AI) ════════════ */
.daily-reveal > * { animation: staggerReveal 0.7s ease both; }
.daily-reveal .stagger-1 { animation-delay: 0.1s; }
.daily-reveal .stagger-2 { animation-delay: 0.3s; }
.daily-reveal .stagger-3 { animation-delay: 0.5s; }
.daily-reveal .stagger-4 { animation-delay: 0.7s; }
.daily-reveal .stagger-5 { animation-delay: 0.9s; }
.daily-reveal .stagger-6 { animation-delay: 1.1s; }

.daily-reveal .daily-card {
    position: relative; overflow: hidden;
}
.daily-sign-aura {
    position: absolute; inset: -50%;
    background: radial-gradient(circle at center, rgba(201,160,255,0.08), transparent 60%);
    animation: crystalGlow 3s ease-in-out infinite; pointer-events: none;
}
.daily-sign-icon { position: relative; z-index: 1; }

.daily-sections { max-width: 700px; margin: 0 auto 24px; padding: 0 24px;
    display: flex; flex-direction: column; gap: 14px; }
.daily-msg-card {
    display: flex; align-items: flex-start; gap: 16px;
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
    padding: 20px; transition: var(--transition);
}
.daily-msg-card:hover { border-color: var(--accent-dark); transform: translateX(4px); }
.daily-msg-icon { font-size: 28px; flex-shrink: 0; }
.daily-msg-body strong { display: block; font-size: 14px; margin-bottom: 6px; color: var(--accent-light); }
.daily-msg-body p { font-size: 14px; line-height: 1.7; color: var(--text-muted); margin: 0; }

.daily-advice-card {
    max-width: 700px; margin: 0 auto 24px; padding: 24px 28px;
    background: linear-gradient(135deg, rgba(255,215,110,0.06), rgba(201,160,255,0.04));
    border: 1px solid var(--border); border-radius: var(--radius);
    text-align: center; position: relative;
}
.daily-advice-star { font-size: 32px; display: block; margin-bottom: 8px; }
.daily-advice-card p { font-size: 15px; line-height: 1.7; color: var(--text); }

.daily-tarot-card {
    max-width: 400px; margin: 0 auto 24px;
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
    padding: 24px; text-align: center; transition: var(--transition);
}
.daily-tarot-card:hover { border-color: var(--accent-dark); transform: translateY(-4px); box-shadow: var(--shadow-glow); }
.daily-tarot-icon { font-size: 48px; margin-bottom: 8px; }
.daily-tarot-name { font-family: var(--font-display); font-size: 20px; color: var(--accent-light); margin-bottom: 8px; }
.daily-tarot-meaning { font-size: 14px; color: var(--text-muted); line-height: 1.6; }

.daily-lucky { max-width: 700px; margin: 0 auto 24px; padding: 0 24px; }

.daily-reveal .daily-card .score-ring { position: relative; }
.daily-reveal .daily-card .ring-num {
    position: absolute; width: 48px; height: 48px; border-radius: 50%;
    background: var(--surface); display: flex; align-items: center; justify-content: center;
    font-size: 16px; font-weight: 700; color: var(--accent-light);
    top: 50%; left: 50%; transform: translate(-50%, -50%);
}

/* ════════════ COMPATIBILITY LOADING ════════════ */
.compat-loading {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    min-height: 400px; padding: 40px;
}
.compat-loading-hearts {
    display: flex; align-items: center; gap: 20px; margin-bottom: 24px;
}
.compat-load-heart {
    font-size: 56px; animation: heartbeat 1.5s ease-in-out infinite;
}
.compat-load-heart.h2 { animation-delay: 0.3s; }
.compat-load-merge {
    font-size: 24px; color: var(--accent);
    animation: mergePulse 1.5s ease-in-out infinite;
}
@keyframes mergePulse {
    0%, 100% { opacity: 0.3; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.3); }
}
.compat-loading-pulse {
    width: 100px; height: 4px; border-radius: 2px;
    background: var(--surface-2); overflow: hidden; margin-bottom: 24px;
}
.compat-loading-pulse::after {
    content: ''; display: block; width: 40%; height: 100%;
    background: var(--gradient-main); border-radius: 2px;
    animation: pulseSlide 1.5s ease-in-out infinite;
}
@keyframes pulseSlide {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(350%); }
}
.compat-loading-msg {
    font-family: var(--font-display); font-size: 18px;
    color: var(--accent-light); animation: glowPulse 2s ease-in-out infinite;
}

/* ════════════ COMPATIBILITY REVEAL ════════════ */
.compat-reveal > * { animation: staggerReveal 0.7s ease both; }
.compat-reveal .stagger-1 { animation-delay: 0.1s; }
.compat-reveal .stagger-2 { animation-delay: 0.4s; }
.compat-reveal .stagger-3 { animation-delay: 0.7s; }
.compat-reveal .stagger-4 { animation-delay: 1s; }
.compat-reveal .stagger-5 { animation-delay: 1.3s; }
.compat-reveal .stagger-6 { animation-delay: 1.5s; }

.compat-reveal .compat-overall { position: relative; overflow: hidden; }
.compat-overall-aura {
    position: absolute; inset: -50%;
    background: radial-gradient(circle at center, rgba(255,107,157,0.08), transparent 60%);
    animation: crystalGlow 3s ease-in-out infinite; pointer-events: none;
}
.compat-score-wrap {
    position: relative; width: 160px; height: 160px; margin: 0 auto 16px;
}
.compat-ring-svg { width: 100%; height: 100%; }
.compat-overall .compat-overall-score {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    font-size: 36px; font-weight: 900;
    background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
.compat-signs-row {
    display: flex; align-items: center; justify-content: center; gap: 16px;
    margin: 12px 0; font-size: 20px; font-weight: 700;
}
.compat-sign { color: var(--accent-light); }
.compat-heart-icon { animation: heartbeat 1.5s ease-in-out infinite; }
.compat-element-compat { font-size: 13px; color: var(--text-dim); margin-top: 8px; font-style: italic; }

.compat-details-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 16px;
    max-width: 700px; margin: 0 auto 28px; padding: 0 24px;
}
.compat-detail-card {
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
    padding: 24px; transition: var(--transition);
}
.compat-detail-card:hover { border-color: var(--accent-dark); transform: translateY(-3px); }
.compat-detail-card h4 { font-size: 16px; margin-bottom: 12px; }
.compat-detail-card ul { list-style: none; display: flex; flex-direction: column; gap: 8px; }
.compat-detail-card li { font-size: 14px; color: var(--text-muted); line-height: 1.5; padding-left: 16px; position: relative; }
.compat-detail-card.strengths li::before { content: '✓'; position: absolute; left: 0; color: var(--teal); font-weight: 700; }
.compat-detail-card.challenges li::before { content: '!'; position: absolute; left: 0; color: var(--rose); font-weight: 700; }

.compat-soul {
    max-width: 700px; margin: 0 auto 24px; padding: 32px;
    text-align: center;
    background: linear-gradient(135deg, rgba(201,160,255,0.08), rgba(110,231,200,0.04));
    border: 1px solid var(--border); border-radius: var(--radius);
}
.compat-soul-icon { font-size: 40px; display: block; margin-bottom: 8px; }
.compat-soul h3 { font-family: var(--font-display); font-size: 20px; margin-bottom: 12px; }
.compat-soul p { font-size: 15px; line-height: 1.7; color: var(--text); }

.compat-advice-card {
    max-width: 700px; margin: 0 auto 24px; padding: 28px;
    background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
}
.compat-advice-card h3 { font-family: var(--font-display); font-size: 18px; margin-bottom: 12px; }
.compat-advice-card p { font-size: 15px; line-height: 1.7; color: var(--text); margin-bottom: 12px; }
.compat-best-dates { font-size: 14px; color: var(--accent-light); padding-top: 8px; border-top: 1px solid var(--border); }

/* ════════════ CONFETTI CELEBRATION ════════════ */
.celebration-container {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none; z-index: 9999; overflow: hidden;
}
.confetti-piece {
    position: absolute; top: -20px; border-radius: 2px;
    animation: confettiFall var(--fall-duration) ease-in var(--fall-delay) forwards;
}
@keyframes confettiFall {
    0% { opacity: 1; transform: translateY(0) translateX(0) rotate(0deg); }
    100% { opacity: 0; transform: translateY(100vh) translateX(var(--drift)) rotate(var(--spin)); }
}

/* ════════════ CUSTOM COSMIC CURSOR ════════════ */
body { cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Ccircle cx='12' cy='12' r='4' fill='%23c9a0ff' opacity='0.6'/%3E%3Ccircle cx='12' cy='12' r='1.5' fill='white'/%3E%3C/svg%3E") 12 12, auto; }
a, button, .nav-link, .feature-card, .pref-card, .option-btn, .tarot-card-slot, .faq-item {
    cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Ccircle cx='12' cy='12' r='5' fill='%23ff6b9d' opacity='0.5'/%3E%3Ccircle cx='12' cy='12' r='2' fill='white'/%3E%3C/svg%3E") 12 12, pointer;
}

/* ════════════ AMBIENT MESH GRADIENT ════════════ */
.hero::after {
    content: ''; position: absolute; inset: 0; z-index: 0;
    background:
        radial-gradient(ellipse 600px 400px at 20% 30%, rgba(201,160,255,0.08) 0%, transparent 70%),
        radial-gradient(ellipse 500px 350px at 80% 60%, rgba(255,107,157,0.06) 0%, transparent 70%),
        radial-gradient(ellipse 400px 300px at 50% 80%, rgba(110,231,200,0.05) 0%, transparent 70%);
    animation: ambientShift 12s ease-in-out infinite alternate;
}
@keyframes ambientShift {
    0% { opacity: 0.6; transform: scale(1) rotate(0deg); }
    50% { opacity: 1; transform: scale(1.05) rotate(1deg); }
    100% { opacity: 0.7; transform: scale(0.98) rotate(-1deg); }
}

/* ════════════ NAV AI BADGE DOTS ════════════ */
.nav-link[data-page="tarot"]::after,
.nav-link[data-page="crystal"]::after,
.nav-link[data-page="dream"]::after {
    content: ''; display: inline-block; width: 6px; height: 6px;
    background: var(--gradient-main); border-radius: 50%; margin-left: 4px;
    vertical-align: super; animation: navDotPulse 2s ease-in-out infinite;
}
@keyframes navDotPulse {
    0%, 100% { opacity: 0.4; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.2); }
}

/* ════════════ ANIMATED GRADIENT BORDER (POPULAR) ════════════ */
.pricing-card.popular { position: relative; }
.pricing-card.popular::before {
    content: ''; position: absolute; inset: -2px; border-radius: calc(var(--radius) + 2px);
    background: linear-gradient(135deg, var(--accent), var(--rose), var(--gold), var(--teal), var(--accent));
    background-size: 300% 300%;
    animation: borderGlow 4s ease-in-out infinite;
    z-index: -1;
}
@keyframes borderGlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* ════════════ TESTIMONIAL CAROUSEL ════════════ */
.testimonials-grid {
    scroll-snap-type: x proximity; overflow-x: auto;
    -webkit-overflow-scrolling: touch; scrollbar-width: none;
    padding-bottom: 16px;
}
.testimonials-grid::-webkit-scrollbar { display: none; }
.testimonial-card { scroll-snap-align: start; min-width: 300px; }

/* ════════════ MAGNETIC BUTTON EFFECT ════════════ */
.btn-hero { position: relative; }

/* ════════════ GLASSMORPHISM FORMS ════════════ */
.daily-form, .compat-form, .crystal-form, .dream-form {
    background: rgba(255,255,255,0.02); border: 1px solid var(--border);
    border-radius: var(--radius); padding: 32px 24px !important;
    backdrop-filter: blur(8px);
    box-shadow: 0 8px 32px rgba(0,0,0,0.2);
}

/* ════════════ ANIMATED INPUT FOCUS ════════════ */
.form-group input:focus, .form-group select:focus, textarea:focus, .mood-select:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(201,160,255,0.12), 0 0 20px rgba(201,160,255,0.08);
    transform: translateY(-1px);
}

/* ════════════ TOOLTIP RIBBON EFFECT ════════════ */
.ai-badge {
    position: relative; overflow: hidden;
}
.ai-badge::after {
    content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
    background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.2) 50%, transparent 70%);
    animation: shimmerSlide 3s ease-in-out infinite;
}

/* ════════════ PULSING CTA SECTIONS ════════════ */
.home-cta {
    position: relative; overflow: hidden;
}
.home-cta::before {
    content: ''; position: absolute; inset: 0;
    background: radial-gradient(ellipse at center, rgba(201,160,255,0.08), transparent 70%);
    animation: ambientShift 8s ease-in-out infinite alternate;
}

/* ════════════ STEP CARDS PREMIUM ════════════ */
.step-container { position: relative; }
.step-dot.active { animation: dotActivePulse 1.5s ease-in-out infinite; }
@keyframes dotActivePulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(201,160,255,0.4); }
    50% { box-shadow: 0 0 0 8px rgba(201,160,255,0); }
}

/* ════════════ MOBILE RESPONSIVE UPDATES ════════════ */
@media (max-width: 768px) {
    .compat-details-grid { grid-template-columns: 1fr; }
    .daily-sections { padding: 0 16px; }
    .compat-loading-hearts .compat-load-heart { font-size: 40px; }
    .zodiac-wheel { width: 160px; height: 160px; }
    .zodiac-sym { transform: rotate(calc(var(--i) * 30deg)) translateY(-70px) rotate(calc(var(--i) * -30deg)); font-size: 16px; }
    .zodiac-center { font-size: 42px; }
    .compat-score-wrap { width: 130px; height: 130px; }
}

/* ════════════ CURSOR TRAIL ════════════ */
.cursor-trail-container { pointer-events: none; position: fixed; inset: 0; z-index: 99999; }
.cursor-trail-dot {
    position: absolute; width: 8px; height: 8px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(201,160,255,0.8), rgba(255,107,157,0.4));
    transform: translate(-50%, -50%);
    opacity: calc(1 - var(--i) * 0.2);
    filter: blur(calc(var(--i) * 0.5px));
    transition: opacity 0.1s;
    pointer-events: none;
}

/* ════════════ SHOOTING STAR CURSOR ════════════ */
.shooting-star-toggle {
    position: fixed; bottom: 80px; right: 20px; z-index: 9998;
    width: 44px; height: 44px; border-radius: 50%;
    background: rgba(20, 15, 40, 0.8); border: 1px solid rgba(201,160,255,0.3);
    color: var(--text); cursor: pointer; font-size: 20px;
    display: flex; align-items: center; justify-content: center;
    backdrop-filter: blur(8px); transition: all 0.3s ease;
    box-shadow: 0 2px 12px rgba(0,0,0,0.3);
}
.shooting-star-toggle:hover { border-color: var(--accent); transform: scale(1.1); }
.shooting-star-toggle.active { background: rgba(201,160,255,0.2); border-color: var(--accent-light); box-shadow: 0 0 16px rgba(201,160,255,0.3); }
.shooting-star-canvas { pointer-events: none; position: fixed; inset: 0; z-index: 99998; }

/* ════════════ SCROLL PROGRESS BAR ════════════ */
.scroll-progress-bar {
    position: fixed; top: 0; left: 0; height: 3px; width: 0%;
    background: linear-gradient(90deg, var(--accent), var(--rose), var(--gold), var(--teal));
    z-index: 10001; transition: width 0.15s ease-out;
    box-shadow: 0 0 10px rgba(201,160,255,0.5);
}

/* ════════════ MAGNETIC BUTTON HOVER ════════════ */
.btn-hero {
    transition: transform 0.2s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.3s;
}

/* ════════════ TYPEWRITER EFFECT ════════════ */
.typewriter-text {
    display: inline;
}
.typewriter-cursor {
    display: inline-block; width: 2px; height: 1em;
    background: var(--accent); margin-left: 2px;
    animation: typewriterBlink 0.7s step-end infinite;
    vertical-align: text-bottom;
}
@keyframes typewriterBlink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}

/* ════════════ SMART NAVBAR ════════════ */
.navbar { transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.35s; }
.navbar.nav-hidden { transform: translateY(-100%); }
.navbar.nav-hidden.menu-open { transform: translateY(0) !important; }
.navbar.nav-scrolled {
    background: var(--loading-bg, rgba(7,7,26,0.95)); backdrop-filter: blur(16px);
    box-shadow: 0 4px 30px rgba(0,0,0,0.3), 0 0 60px rgba(201,160,255,0.05);
}

/* ════════════ BACK TO TOP BUTTON ════════════ */
.back-to-top {
    position: fixed; bottom: 32px; right: 32px;
    width: 48px; height: 48px; border-radius: 50%;
    background: rgba(201,160,255,0.15); border: 1px solid rgba(201,160,255,0.3);
    backdrop-filter: blur(12px);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; z-index: 9998;
    opacity: 0; transform: translateY(20px) scale(0.8);
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    pointer-events: none;
}
.back-to-top.visible {
    opacity: 1; transform: translateY(0) scale(1);
    pointer-events: all;
}
.back-to-top:hover {
    background: rgba(201,160,255,0.3); border-color: var(--accent);
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 8px 25px rgba(201,160,255,0.3);
}
.back-to-top svg { width: 20px; height: 20px; }
.back-to-top .btt-progress {
    position: absolute; inset: -2px;
    transform: rotate(-90deg);
}
.back-to-top .btt-progress circle {
    fill: none; stroke: var(--accent); stroke-width: 2;
    stroke-dasharray: 160; stroke-dashoffset: 160;
    stroke-linecap: round; transition: stroke-dashoffset 0.25s;
}

/* ════════════ PAGE TRANSITION ENHANCED ════════════ */
@keyframes pageEnter {
    0% { opacity: 0; transform: translateY(16px); filter: blur(2px); }
    100% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
}

/* ════════════ PREMIUM FOOTER ════════════ */
.premium-footer {
    background: linear-gradient(180deg, transparent 0%, rgba(201,160,255,0.03) 30%, rgba(7,7,26,1) 100%);
    border-top: 1px solid rgba(201,160,255,0.08);
    padding: 64px 32px 32px; margin-top: 80px;
}
.footer-inner {
    max-width: 1100px; margin: 0 auto;
    display: grid; grid-template-columns: 2fr 1fr 1fr 1fr;
    gap: 48px;
}
.footer-brand h3 {
    font-family: var(--font-display); font-size: 24px;
    background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
    margin-bottom: 12px;
}
.footer-brand p { color: var(--text-muted); font-size: 14px; line-height: 1.6; max-width: 280px; }
.footer-col h4 {
    color: var(--text); font-size: 13px; font-weight: 600;
    text-transform: uppercase; letter-spacing: 1.5px;
    margin-bottom: 16px;
}
.footer-col a {
    display: block; color: var(--text-muted); font-size: 14px;
    padding: 6px 0; transition: color 0.2s, transform 0.2s;
    text-decoration: none; cursor: pointer;
}
.footer-col a:hover { color: var(--accent); transform: translateX(4px); }
.footer-bottom {
    max-width: 1100px; margin: 40px auto 0;
    padding-top: 24px; border-top: 1px solid rgba(201,160,255,0.06);
    display: flex; justify-content: space-between; align-items: center;
    flex-wrap: wrap; gap: 16px;
}
.footer-bottom span { color: var(--text-muted); font-size: 13px; }
.footer-socials { display: flex; gap: 12px; }
.footer-socials a {
    width: 36px; height: 36px; border-radius: 50%;
    background: rgba(201,160,255,0.08); border: 1px solid rgba(201,160,255,0.12);
    display: flex; align-items: center; justify-content: center;
    font-size: 16px; text-decoration: none;
    transition: all 0.3s;
}
.footer-socials a:hover {
    background: rgba(201,160,255,0.2); border-color: var(--accent);
    transform: translateY(-2px); box-shadow: 0 4px 15px rgba(201,160,255,0.2);
}
@media (max-width: 768px) {
    .footer-inner { grid-template-columns: 1fr 1fr; gap: 32px; }
    .footer-bottom { flex-direction: column; text-align: center; }
    .back-to-top { bottom: 20px; right: 20px; width: 42px; height: 42px; }
    .cursor-trail-container { display: none; }
    .shooting-star-toggle { display: none; }
    .shooting-star-canvas { display: none; }
}
@media (max-width: 480px) {
    .footer-inner { grid-template-columns: 1fr; }
}

/* ════════════ SOUND TOGGLE ════════════ */
.sound-toggle {
    position: fixed; bottom: 32px; left: 32px;
    width: 42px; height: 42px; border-radius: 50%;
    background: rgba(201,160,255,0.1); border: 1px solid rgba(201,160,255,0.2);
    backdrop-filter: blur(12px);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; z-index: 9998; font-size: 18px;
    transition: all 0.3s;
}
.sound-toggle:hover {
    background: rgba(201,160,255,0.25); transform: scale(1.1);
    box-shadow: 0 4px 20px rgba(201,160,255,0.2);
}
.sound-toggle.muted { opacity: 0.5; }
@media (max-width: 768px) {
    .sound-toggle { bottom: 20px; left: 20px; width: 36px; height: 36px; font-size: 15px; }
}

/* ════════════ NOISE TEXTURE OVERLAY ════════════ */
body::before {
    content: ''; position: fixed; inset: 0; z-index: 0; pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 256px 256px;
    opacity: 0.4;
    mix-blend-mode: overlay;
}

/* ════════════ AURORA BACKGROUND EFFECT ════════════ */
.hero::before {
    content: ''; position: absolute; top: -50%; left: -20%; right: -20%;
    height: 200%; z-index: -1; pointer-events: none;
    background: 
        radial-gradient(ellipse 800px 300px at 30% 20%, rgba(100,255,218,0.04) 0%, transparent 60%),
        radial-gradient(ellipse 600px 200px at 70% 40%, rgba(201,160,255,0.05) 0%, transparent 60%),
        radial-gradient(ellipse 500px 250px at 50% 70%, rgba(255,107,157,0.03) 0%, transparent 60%);
    animation: auroraWave 20s ease-in-out infinite;
}
@keyframes auroraWave {
    0% { transform: translateX(0) skewY(0deg); opacity: 0.5; }
    25% { transform: translateX(30px) skewY(1deg); opacity: 0.8; }
    50% { transform: translateX(-20px) skewY(-0.5deg); opacity: 0.6; }
    75% { transform: translateX(15px) skewY(0.5deg); opacity: 0.9; }
    100% { transform: translateX(0) skewY(0deg); opacity: 0.5; }
}

/* ════════════ ANIMATED SECTION DIVIDERS ════════════ */
.home-section {
    position: relative;
}
.home-section + .home-section::before {
    content: '✦ ── ✧ ── ✦';
    display: block;
    text-align: center;
    color: var(--accent-dark);
    font-size: 12px;
    letter-spacing: 6px;
    padding: 24px 0;
    opacity: 0.4;
    animation: dividerPulse 3s ease-in-out infinite;
}
@keyframes dividerPulse {
    0%, 100% { opacity: 0.3; letter-spacing: 6px; }
    50% { opacity: 0.6; letter-spacing: 10px; }
}

/* ════════════ SKELETON LOADING ════════════ */
.skeleton {
    background: linear-gradient(90deg, 
        var(--surface) 25%, 
        rgba(201,160,255,0.06) 37%, 
        var(--surface) 63%);
    background-size: 200% 100%;
    animation: skeletonShimmer 1.5s ease-in-out infinite;
    border-radius: var(--radius-sm);
}
.skeleton-text { height: 14px; margin-bottom: 8px; width: 80%; }
.skeleton-title { height: 24px; margin-bottom: 12px; width: 60%; }
.skeleton-circle { width: 60px; height: 60px; border-radius: 50%; }
.skeleton-card {
    height: 200px; border-radius: var(--radius);
    border: 1px solid var(--border);
}
@keyframes skeletonShimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

/* ════════════ KEYBOARD SHORTCUTS PANEL ════════════ */
.shortcuts-panel {
    position: fixed; inset: 0; z-index: 10002;
    background: var(--navbar-bg, rgba(7,7,26,0.85)); backdrop-filter: blur(20px);
    display: flex; align-items: center; justify-content: center;
    animation: fadeIn 0.3s ease;
}
.shortcuts-inner {
    background: var(--surface); border: 1px solid var(--border-light);
    border-radius: var(--radius); padding: 36px 40px;
    max-width: 520px; width: 90%;
    box-shadow: 0 25px 80px rgba(0,0,0,0.5), var(--shadow-glow);
}
.shortcuts-inner h3 {
    font-family: var(--font-display); font-size: 22px;
    margin-bottom: 24px; text-align: center;
    background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
.shortcuts-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
}
.shortcut-item {
    display: flex; align-items: center; gap: 12px;
    padding: 10px 14px; border-radius: var(--radius-sm);
    background: rgba(255,255,255,0.02); border: 1px solid var(--border);
    transition: var(--transition);
}
.shortcut-item:hover { border-color: var(--accent-dark); background: rgba(201,160,255,0.04); }
.shortcut-item kbd {
    display: inline-flex; align-items: center; justify-content: center;
    min-width: 32px; height: 28px; padding: 0 8px;
    background: var(--bg); border: 1px solid var(--border-light);
    border-radius: 6px; font-family: var(--font);
    font-size: 12px; font-weight: 600; color: var(--accent);
    box-shadow: 0 2px 0 rgba(0,0,0,0.3);
}
.shortcut-item span { font-size: 13px; color: var(--text-muted); }
.shortcuts-hint {
    text-align: center; margin-top: 20px; font-size: 12px;
    color: var(--text-dim);
}
.shortcuts-hint kbd {
    display: inline-block; padding: 1px 6px;
    background: var(--bg); border: 1px solid var(--border);
    border-radius: 4px; font-size: 11px; color: var(--accent);
    margin: 0 2px;
}
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* ════════════ THEME TOGGLE BUTTON ════════════ */
.theme-toggle {
    position: fixed; bottom: 32px; left: 84px;
    width: 42px; height: 42px; border-radius: 50%;
    background: var(--bg-glass, rgba(201,160,255,0.1)); border: 1px solid var(--border);
    backdrop-filter: blur(12px);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; z-index: 9998; font-size: 18px;
    transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
}
.theme-toggle:hover {
    background: rgba(201,160,255,0.25); transform: scale(1.15) rotate(15deg);
    box-shadow: 0 4px 20px rgba(201,160,255,0.3);
}
@media (max-width: 768px) {
    .theme-toggle { bottom: 20px; left: 64px; width: 36px; height: 36px; font-size: 15px; }
}

/* ════════════ THEME PICKER PANEL ════════════ */
.theme-panel {
    position: fixed; bottom: 80px; left: 20px;
    width: 340px; max-height: 480px;
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 16px; z-index: 9999;
    box-shadow: 0 16px 64px rgba(0,0,0,0.4), 0 0 60px rgba(201,160,255,0.08);
    backdrop-filter: blur(20px);
    transform: translateY(20px) scale(0.95);
    opacity: 0; pointer-events: none;
    transition: all 0.35s cubic-bezier(0.23, 1, 0.32, 1);
    overflow: hidden;
}
.theme-panel.open {
    transform: translateY(0) scale(1);
    opacity: 1; pointer-events: auto;
}
.theme-panel-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 16px 20px 12px; border-bottom: 1px solid var(--border);
}
.theme-panel-header h3 {
    font-family: var(--font-display); font-size: 16px; color: var(--text);
    background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
.theme-panel-close {
    width: 28px; height: 28px; border-radius: 50%;
    background: var(--bg-card); border: 1px solid var(--border);
    color: var(--text-muted); font-size: 12px;
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
}
.theme-panel-close:hover { background: rgba(255,107,157,0.15); color: var(--rose); border-color: var(--rose); }
.theme-panel-grid {
    display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;
    padding: 16px; max-height: 360px; overflow-y: auto;
}
.theme-panel-grid::-webkit-scrollbar { width: 4px; }
.theme-panel-grid::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
.theme-card {
    position: relative; border-radius: 10px;
    border: 1.5px solid var(--border); background: var(--bg-card);
    cursor: pointer; transition: all 0.3s ease; overflow: hidden;
}
.theme-card:hover {
    border-color: var(--accent-dark); transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
}
.theme-card.active {
    border-color: var(--accent); box-shadow: 0 0 20px rgba(201,160,255,0.2);
}
.theme-card.premium::after {
    content: ''; position: absolute; top: 0; right: 0;
    border-left: 20px solid transparent; border-top: 20px solid var(--gold);
    opacity: 0.7;
}
.theme-preview {
    height: 56px; overflow: hidden; border-radius: 8px 8px 0 0;
}
.theme-preview-bg {
    width: 100%; height: 100%; position: relative; overflow: hidden;
}
.theme-preview-accent {
    position: absolute; bottom: -8px; left: -10%; width: 120%; height: 24px;
    border-radius: 50%; filter: blur(8px); opacity: 0.6;
}
.theme-preview-dots {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    display: flex; gap: 6px;
}
.theme-preview-dots span {
    width: 12px; height: 12px; border-radius: 50%;
    box-shadow: 0 0 8px currentColor;
}
.theme-card-info {
    display: flex; align-items: center; gap: 6px;
    padding: 8px 10px; font-size: 12px; font-weight: 600; color: var(--text);
}
.theme-card-icon { font-size: 14px; }
.theme-card-name { flex: 1; font-size: 11px; }
.theme-lock { font-size: 10px; opacity: 0.6; }
.theme-active-badge {
    position: absolute; top: 6px; left: 6px;
    padding: 2px 8px; border-radius: 50px;
    background: var(--gradient-main); color: white;
    font-size: 9px; font-weight: 700;
}
.theme-panel-hint {
    padding: 10px 16px; border-top: 1px solid var(--border);
    font-size: 11px; color: var(--text-dim); text-align: center;
}
.theme-panel-hint a { color: var(--accent); text-decoration: none; font-weight: 600; }
.theme-panel-hint a:hover { text-decoration: underline; }
@media (max-width: 768px) {
    .theme-panel { left: 12px; right: 12px; width: auto; bottom: 72px; }
}

/* ════════════ NAV NEW BADGES ════════════ */
.nav-new-badge {
    display: inline-block; margin-left: 6px;
    padding: 1px 6px; border-radius: 8px;
    background: var(--gradient-main); color: white;
    font-size: 9px; font-weight: 700; letter-spacing: 0.5px;
    text-transform: uppercase; vertical-align: super;
    animation: badgeBounce 2s ease-in-out infinite;
}
@keyframes badgeBounce {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-2px) scale(1.05); }
}

/* ════════════ SKIP LINK (A11Y) ════════════ */
.skip-link {
    position: fixed; top: -100%; left: 50%; transform: translateX(-50%);
    padding: 12px 24px; background: var(--accent); color: var(--bg);
    border-radius: var(--radius-sm); font-weight: 600;
    z-index: 99999; transition: top 0.3s;
}
.skip-link:focus { top: 12px; }

/* ════════════ SCREEN READER ONLY ════════════ */
.sr-only {
    position: absolute !important; width: 1px !important; height: 1px !important;
    padding: 0 !important; margin: -1px !important; overflow: hidden !important;
    clip: rect(0,0,0,0) !important; white-space: nowrap !important;
    border: 0 !important;
}

/* ════════════ REDUCED MOTION ════════════ */
.reduced-motion *, 
.reduced-motion *::before, 
.reduced-motion *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
}

/* ════════════ CARD HOVER LIFT (GLOBAL) ════════════ */
.feature-card, .pricing-card, .testimonial-card, .about-step-card {
    will-change: transform;
    backface-visibility: hidden;
}

/* ════════════ GLASSMORPHISM CARD SHIMMER ════════════ */
.feature-card::before {
    content: ''; position: absolute; top: 0; left: -75%; width: 50%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.03), transparent);
    transform: skewX(-15deg);
    transition: left 0.6s ease;
    pointer-events: none;
}
.feature-card:hover::before { left: 125%; }

/* ════════════ GRADIENT TEXT ANIMATION ════════════ */
.hero-badge, .section-title span {
    background-size: 200% auto;
    animation: gradientText 4s linear infinite;
}
@keyframes gradientText {
    0% { background-position: 0% center; }
    100% { background-position: 200% center; }
}

/* ════════════ FLOATING LABEL INPUTS ════════════ */
.form-group { position: relative; }
.form-group label {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.form-group input:focus + label,
.form-group input:not(:placeholder-shown) + label {
    transform: translateY(-22px) scale(0.85);
    color: var(--accent);
}

/* ════════════ SMOOTH UNDERLINE NAV INDICATOR (desktop only) ════════════ */
.nav-link {
    position: relative;
}
.nav-link::before {
    content: ''; position: absolute; bottom: -4px; left: 50%; width: 0; height: 2px;
    background: var(--gradient-main); border-radius: 1px;
    transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
    transform: translateX(-50%);
}
.nav-link:hover::before, .nav-link.active::before {
    width: 100%;
}
@media (max-width: 1100px) {
    .nav-link::before { display: none; }
}

/* ════════════ PULSE DOT FOR LIVE FEATURES ════════════ */
.live-dot {
    display: inline-block; width: 8px; height: 8px;
    background: #4ade80; border-radius: 50%; margin-right: 6px;
    animation: livePulse 1.5s ease-in-out infinite;
    box-shadow: 0 0 8px rgba(74,222,128,0.5);
}
@keyframes livePulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(0.8); }
}

/* ════════════ GRADIENT BORDERS ON FOCUS ════════════ */
.form-group input:focus, textarea:focus, .mood-select:focus {
    border-image: var(--gradient-main) 1;
    border-image-slice: 1;
}

/* ════════════ PREMIUM BUTTON STYLES ════════════ */
.btn-hero::after {
    content: ''; position: absolute; inset: -1px;
    background: var(--gradient-main); border-radius: inherit;
    z-index: -1; opacity: 0;
    filter: blur(12px);
    transition: opacity 0.4s;
}
.btn-hero:hover::after { opacity: 0.6; }

/* ════════════ TYPING INDICATOR ════════════ */
.typing-indicator {
    display: inline-flex; gap: 4px; padding: 8px 16px;
    background: var(--bg-card); border-radius: 20px;
    border: 1px solid var(--border);
}
.typing-indicator span {
    width: 6px; height: 6px; border-radius: 50%;
    background: var(--accent); opacity: 0.4;
    animation: typingDot 1.4s ease-in-out infinite;
}
.typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
.typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingDot {
    0%, 60%, 100% { opacity: 0.4; transform: translateY(0); }
    30% { opacity: 1; transform: translateY(-4px); }
}

/* ════════════ KAHVE FALI ════════════ */
.fortune-form { max-width: 540px; margin: 32px auto; }
.fortune-form select {
    width: 100%; padding: 12px 16px; border-radius: var(--radius-sm);
    background: var(--bg-card); border: 1px solid var(--border); color: var(--text);
    font-size: 14px; font-family: var(--font); -webkit-appearance: none; appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%238a84a0' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat; background-position: right 14px center;
}
.fortune-form .form-group { margin-bottom: 18px; }
.fortune-form .form-group label { display: block; font-size: 14px; font-weight: 500; color: var(--text); margin-bottom: 8px; }
.fortune-form .form-group small { color: var(--text-dim); }
.fortune-form textarea, .fortune-form input { width: 100%; }
.fortune-form .btn-primary {
    width: 100%; padding: 16px; font-size: 16px; font-weight: 600;
    background: var(--gradient-main); border: none; border-radius: var(--radius-sm);
    color: white; cursor: pointer; font-family: var(--font);
}
.fortune-dropzone {
    border: 2px dashed var(--border-light); border-radius: var(--radius);
    padding: 32px 16px; text-align: center; cursor: pointer;
    transition: var(--transition); background: rgba(255,255,255,0.02);
    position: relative; min-height: 180px; display: flex; align-items: center; justify-content: center;
}
.fortune-dropzone:hover, .fortune-dropzone:focus-within {
    border-color: var(--accent); background: rgba(201,160,255,0.04);
}
.fortune-preview { width: 100%; }
.fortune-drop-icon { font-size: 48px; margin-bottom: 12px; opacity: 0.7; }
.fortune-drop-text { font-size: 15px; color: var(--text-muted); font-weight: 500; margin-bottom: 4px; }
.fortune-dropzone small { font-size: 12px; color: var(--text-dim); }
.fortune-preview-img {
    max-width: 100%; max-height: 320px; border-radius: var(--radius-sm);
    object-fit: contain; display: block; margin: 0 auto;
}
.fortune-remove-img {
    position: absolute; top: 8px; right: 8px;
    width: 32px; height: 32px; border-radius: 50%;
    background: rgba(0,0,0,0.6); border: 1px solid rgba(255,255,255,0.2);
    color: white; font-size: 16px; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: var(--transition); backdrop-filter: blur(4px);
}
.fortune-remove-img:hover { background: var(--rose); }
.fortune-hint {
    text-align: center; font-size: 12px; color: var(--text-dim); margin-top: 12px;
}
.fortune-loading-scene { text-align: center; padding: 80px 24px; }
.fortune-cup-anim {
    font-size: 72px; display: inline-block;
    animation: fortuneSpin 2s ease-in-out infinite;
}
@keyframes fortuneSpin {
    0%, 100% { transform: rotate(0deg) scale(1); }
    25% { transform: rotate(-15deg) scale(1.1); }
    50% { transform: rotate(180deg) scale(0.95); }
    75% { transform: rotate(190deg) scale(1.05); }
}
.fortune-loading-msg { color: var(--text-muted); font-size: 16px; margin-top: 16px; }
.fortune-reveal { max-width: 650px; margin: 0 auto; }
.fortune-header { text-align: center; margin-bottom: 32px; }
.fortune-cup-icon { font-size: 56px; margin-bottom: 12px; }
.fortune-title {
    font-family: var(--font-display); font-size: 28px; font-weight: 600;
    background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
.fortune-mood {
    display: inline-block; margin-top: 8px; padding: 4px 14px;
    background: rgba(201,160,255,0.1); border: 1px solid rgba(201,160,255,0.15);
    border-radius: 20px; font-size: 13px; color: var(--accent-light);
}
.fortune-general, .fortune-symbols, .fortune-sections, .fortune-answer, .fortune-advice {
    margin-bottom: 28px; padding: 20px; border-radius: var(--radius-sm);
    background: var(--bg-card); border: 1px solid var(--border);
}
.fortune-general h3, .fortune-symbols h3, .fortune-answer h3 { color: var(--accent-light); font-size: 16px; margin-bottom: 12px; }
.fortune-general p, .fortune-answer p { color: var(--text-muted); font-size: 14px; line-height: 1.7; }
.fortune-sections { display: grid; grid-template-columns: 1fr; gap: 16px; background: none; border: none; padding: 0; }
.fortune-section {
    padding: 18px; border-radius: var(--radius-sm);
    background: var(--bg-card); border: 1px solid var(--border);
}
.fortune-section h4 { color: var(--text); font-size: 15px; margin-bottom: 8px; }
.fortune-section p { color: var(--text-muted); font-size: 13px; line-height: 1.6; }

/* ════════════ ENHANCED MOBILE – EXTRAS ════════════ */
@media (max-width: 768px) {
    .shortcuts-panel .shortcuts-grid { grid-template-columns: 1fr; }
    .shortcuts-inner { padding: 24px 20px; }
    .btn, button { min-height: 44px; }
    .pref-card, .option-btn { min-height: 48px; }
    .formula-box code { font-size: 11px; }
    .footer-col a { padding: 10px 0; }
}
@media (max-width: 480px) {
    .shortcuts-panel .shortcuts-inner { padding: 20px 16px; }
    .theme-toggle { bottom: 68px; left: 12px; }
    .sound-toggle { bottom: 20px; left: 12px; }
}

/* ════════════ ENERGY FEATURE CARD & POPUP ════════════ */
.energy-feature-card { position: relative; overflow: visible; }
.energy-quick-badge {
    display: none; font-size: 12px; color: var(--accent-light);
    margin-top: 8px; padding: 4px 10px; border-radius: 50px;
    background: rgba(201,160,255,0.1); letter-spacing: 0.3px;
}
.energy-popup { z-index: 10001; }
.energy-content {
    background: var(--surface) !important; border: 1px solid var(--border);
    border-radius: var(--radius-md); padding: 28px 24px;
    animation: popIn 0.3s ease;
}
@keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

/* ════════════ LIGHT THEME OVERRIDES ════════════ */
body.light-theme {
    color-scheme: light;
}
body.light-theme .navbar {
    border-bottom-color: rgba(124,58,237,0.12);
    box-shadow: 0 1px 8px rgba(0,0,0,0.06);
}
body.light-theme ::selection { background: rgba(124,58,237,0.25); color: #1e1b4b; }
body.light-theme ::-webkit-scrollbar-track { background: #f5f3ff; }
body.light-theme ::-webkit-scrollbar-thumb { background: rgba(124,58,237,0.3); }
body.light-theme .result-card:hover { background: rgba(124,58,237,0.06); }
body.light-theme .leaflet-popup-content-wrapper { background: #fff !important; color: #1e1b4b !important; border-color: rgba(124,58,237,0.15) !important; box-shadow: 0 4px 20px rgba(0,0,0,0.1) !important; }
body.light-theme .leaflet-popup-tip { background: #fff !important; }
body.light-theme .astro-marker { background: #7c3aed; box-shadow: 0 0 10px rgba(124,58,237,0.5); }
body.light-theme .astro-marker-top { background: linear-gradient(135deg, #7c3aed, #ec4899); box-shadow: 0 0 16px rgba(124,58,237,0.4); }
body.light-theme .ai-badge { background: linear-gradient(135deg, #7c3aed, #d97706) !important; }
body.light-theme .btn-hero { box-shadow: 0 4px 20px rgba(124,58,237,0.25); }
body.light-theme .modal-content { background: #f5f3ff; }
body.light-theme .share-card-inner { background: linear-gradient(135deg, #ede9fe, #f5f3ff); }
body.light-theme .loading-spinner { background: linear-gradient(135deg, #7c3aed, #ec4899); -webkit-background-clip: text; background-clip: text; }
body.light-theme input, body.light-theme select, body.light-theme textarea { color-scheme: light; }

/* ════════════ HIDE FLOATING TOGGLES ON RESULTS PAGE ════════════ */
body.results-active .sound-toggle,
body.results-active .theme-toggle,
body.results-active .theme-panel { display: none !important; }

/* ════════════ PRINT STYLES ════════════ */
@media print {
    .navbar, .scroll-progress-bar, .back-to-top, .sound-toggle, 
    .theme-toggle, .cursor-trail-container, .hero-float-particles { display: none !important; }
    body::before { display: none; }
    body { background: white; color: black; }
    .page { animation: none !important; }
}

/* ════════════ PERIOD TOGGLE (Daily/Weekly/Monthly) ════════════ */
.period-toggle {
    display: flex; gap: 0.5rem; justify-content: center; margin-bottom: 1rem;
}
.period-btn {
    background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1);
    color: var(--text-muted); padding: 0.4rem 1rem; border-radius: 99px;
    cursor: pointer; font-size: 0.85rem; transition: all 0.3s;
}
.period-btn.active {
    background: var(--accent); color: #fff; border-color: var(--accent);
    box-shadow: 0 0 12px rgba(201,160,255,0.3);
}
.period-btn:hover:not(.active) { background: rgba(255,255,255,0.1); color: #fff; }
.daily-period-badge {
    display: inline-block; background: var(--accent); color: #fff;
    padding: 0.2rem 0.8rem; border-radius: 99px; font-size: 0.75rem;
    margin-top: 0.3rem; letter-spacing: 0.5px;
}

/* ════════════ RETROGRADE CALENDAR ════════════ */
.retro-dashboard { max-width: 800px; margin: 0 auto; }
.retro-status {
    text-align: center; padding: 1.5rem; border-radius: 1rem; margin-bottom: 2rem;
    background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08);
}
.retro-status.retro-active { border-color: rgba(255,107,62,0.3); background: rgba(255,107,62,0.05); }
.retro-status.retro-clear { border-color: rgba(110,231,200,0.3); background: rgba(110,231,200,0.05); }
.retro-status-icon { font-size: 2rem; margin-bottom: 0.5rem; }
.retro-active-item {
    display: flex; flex-direction: column; align-items: flex-start; gap: 0.2rem;
    background: rgba(255,255,255,0.04); border-radius: 0.75rem; padding: 0.75rem 1rem;
    margin: 0.5rem auto; max-width: 400px;
}
.retro-active-item small { color: var(--text-muted); }
.retro-section-title { text-align: center; margin: 1.5rem 0 1rem; }
.retro-timeline { display: flex; flex-direction: column; gap: 1rem; }
.retro-planet-row {
    display: grid; grid-template-columns: 120px 1fr; gap: 0.75rem 1rem;
    align-items: start; padding: 1rem; border-radius: 0.75rem;
    background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06);
}
.retro-planet-name { font-weight: 600; font-size: 0.95rem; }
.retro-periods { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.retro-period {
    padding: 0.3rem 0.7rem; border-radius: 0.5rem; font-size: 0.8rem;
    border: 1px solid; background: rgba(255,255,255,0.04);
    display: flex; flex-direction: column; gap: 0.15rem;
}
.retro-period.active { background: rgba(255,107,62,0.12); font-weight: 600; }
.retro-period.past { opacity: 0.45; }
.retro-dates { white-space: nowrap; }
.retro-sign { font-size: 0.75rem; color: var(--text-muted); }
.retro-effect { grid-column: 1 / -1; font-size: 0.85rem; color: var(--text-muted); padding-left: 0.5rem; border-left: 2px solid rgba(255,255,255,0.08); }
.retro-tips { margin-top: 2rem; text-align: center; }
.retro-tips h3 { margin-bottom: 1rem; }
.retro-tips-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 0.5rem; text-align: left;
}
.retro-tip {
    padding: 0.6rem 1rem; border-radius: 0.5rem; font-size: 0.85rem;
    background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06);
}

@media (max-width: 600px) {
    .retro-planet-row { grid-template-columns: 1fr; }
}

/* ════════════ DASHBOARD ════════════ */
.dashboard-wrap { max-width: 700px; margin: 0 auto; }
.dash-user-card {
    display: flex; align-items: center; gap: 1rem; padding: 1.5rem;
    background: rgba(255,255,255,0.04); border-radius: 1rem;
    border: 1px solid rgba(255,255,255,0.08); margin-bottom: 1.5rem;
}
.dash-avatar {
    width: 56px; height: 56px; border-radius: 50%;
    background: var(--accent); display: flex; align-items: center;
    justify-content: center; font-size: 1.5rem; flex-shrink: 0;
}
.dash-user-info { display: flex; flex-direction: column; gap: 0.2rem; }
.dash-user-info h3 { margin: 0; }
.dash-user-info span { font-size: 0.85rem; color: var(--text-muted); }
.dash-login-prompt { text-align: center; padding: 2rem; margin-bottom: 1.5rem; }
.dash-stats {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-bottom: 1.5rem;
}
.dash-stat {
    text-align: center; padding: 1.2rem 0.75rem; border-radius: 0.75rem;
    background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08);
}
.dash-stat-num { display: block; font-size: 1.5rem; font-weight: 700; color: var(--accent); }
.dash-stat-label { font-size: 0.75rem; color: var(--text-muted); }
.dash-section { margin-bottom: 1.5rem; }
.dash-section h3 { margin-bottom: 0.75rem; }
.dash-favorites { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.5rem; }
.dash-fav-card {
    display: flex; flex-direction: column; gap: 0.15rem; padding: 0.75rem;
    border-radius: 0.5rem; background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08); font-size: 0.85rem;
}
.dash-fav-score { color: var(--accent); font-weight: 600; }
.dash-history { display: flex; flex-direction: column; gap: 0.35rem; }
.dash-history-item {
    display: flex; justify-content: space-between; padding: 0.6rem 0.75rem;
    border-radius: 0.5rem; background: rgba(255,255,255,0.03);
    font-size: 0.85rem;
}
.dash-history-date { color: var(--text-muted); font-size: 0.8rem; }
.dash-empty { text-align: center; padding: 2rem; color: var(--text-muted); }
.nav-user-name { color: var(--accent); font-weight: 600; font-size: 0.9rem; }

/* ════════════ REDUCED MOTION ════════════ */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; }
    .hero-float-particles, .cursor-trail-container, .shooting-star-canvas,
    .tarot-particles, .crystal-loading-rings { display: none !important; }
    .zodiac-loading .zodiac-ring, .compat-loading-hearts { animation: none !important; }
}

/* ════════════ LIGHT THEME — NEW FEATURES ════════════ */
body.light-theme .period-btn { background: rgba(0,0,0,0.04); border-color: rgba(0,0,0,0.1); color: #64748b; }
body.light-theme .period-btn.active { background: #7c3aed; color: #fff; border-color: #7c3aed; }
body.light-theme .retro-status { background: #fafaf9; border-color: rgba(0,0,0,0.08); }
body.light-theme .retro-planet-row { background: #fafaf9; border-color: rgba(0,0,0,0.06); }
body.light-theme .retro-tip { background: #fafaf9; border-color: rgba(0,0,0,0.06); }
body.light-theme .dash-user-card, body.light-theme .dash-stat,
body.light-theme .dash-fav-card, body.light-theme .dash-history-item {
    background: #fafaf9; border-color: rgba(0,0,0,0.06);
}
body.light-theme .dash-stat-num { color: #7c3aed; }
